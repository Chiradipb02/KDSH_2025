Diffusion Model-based Mobile Traffic Generation with Open Data
for Network Planning and Optimization
Haoye Chai
Department of Electronic
Engineering,
BNRist, Tsinghua University,
Beijing, China
haoyechai@mail.tsinghua.edu.cnTao Jiang
Research Center of 6G Mobile
Communications, School of Cyber
Science and Engineering, Huazhong
University of Science and Technology,
Wuhan, China
tao.jiang@ieee.orgLi Yu
Chinamobile Research Institute,
Beijing, China
yuliyf@chinamobile.com
ABSTRACT
With the rapid development of the Fifth Generation Mobile Com-
munication Technology (5G) networks, network planning and opti-
mization have become increasingly crucial. Generating high-fidelity
network traffic data can preemptively estimate the network de-
mands of mobile users, which holds potential for network opera-
tors to improve network performance. However, the data required
by existing generation methods is predominantly inaccessible to
the public, resulting in a lack of reproducibility for the models
and high deployment costs in practice. In this article, we propose
an Open data-based Diffusion model for mobile traffic generation
(OpenDiff), where a multi-positive contrastive learning algorithm
is designed to construct conditional information for the diffusion
model using entirely publicly available satellite remote sensing
images, Point of Interest (POI), and population data. The condi-
tional information contains relevant human activities in geograph-
ical areas, which can effectively guide the generation of network
traffic data. We further design an attention-based fusion mecha-
nism to capture the implicit correlations between network traffic
and human activity features, enhancing the model’s controllable
generation capability. We conduct evaluations on three different
cities with varying scales, where experimental results verify that
our proposed model outperforms existing methods by 14.36% and
13.05% in terms of generation fidelity and controllability. To fur-
ther validate the effectiveness of the model, we leverage the gen-
erated traffic data to assist the operators with network planning
on a real-world network optimization platform of China Mobile
Communications Corporation. The source code is available on-
line: https://github.com/impchai/OpenDiff-diffusion-model-with-
open-data.
CCS CONCEPTS
•Networks→Network simulations ;Network management ;•
Information systems →Spatial-temporal systems; Data min-
ing.
This work is licensed under a Creative Commons Attribution
International 4.0 License.
KDD ’24, August 25–29, 2024, Barcelona, Spain
©2024 Copyright held by the owner/author(s).
ACM ISBN 979-8-4007-0490-1/24/08.
https://doi.org/10.1145/3637528.3671544KEYWORDS
Mobile traffic generation; Diffusion model; Contrastive learning;
Satellite imagery
ACM Reference Format:
Haoye Chai, Tao Jiang, and Li Yu. 2024. Diffusion Model-based Mobile
Traffic Generation with Open Data for Network Planning and Optimization.
InProceedings of the 30th ACM SIGKDD Conference on Knowledge Discovery
and Data Mining (KDD ’24), August 25–29, 2024, Barcelona, Spain. ACM, New
York, NY, USA, 11 pages. https://doi.org/10.1145/3637528.3671544
1 INTRODUCTION
The Fifth Generation Mobile Communication Technology (5G) has
shown its significant implications for industrial production and
residents’ daily lives, facilitating many advanced applications such
as virtual reality, autonomous driving, and holography commu-
nication etc.As of 2023, the first batch of 5G networks has been
launched, covering over a third of the global population, with the
worldwide 5G Base Stations (BSs) count exceeding 4.48 million and
an industry value reaching $897.98 billion [ 16]. It is reported that
the number of 5G networks will increase from 251 in 2022 to over
640 by 2030, serving worldwide mobile users exceeding 9 billion [ 1].
To ensure this fast commercialization process of the 5G networks
and the massive access of mobile users, rational network planning
and optimization are indispensable.
Network traffic data, as the reflection of user behaviors, pro-
vides important support for network planning and optimization.
Operators can refer to the network traffic to analyze network us-
age, load conditions, and user demands, thereby adopting plan-
ning/optimization strategies, e.g.,resource scheduling, BS site se-
lection, and energy saving. However, operators currently adopt
passive and reactive strategies, i.e., adjusting networks only after
observing traffic data. This approach results in processing delays
and fails to adapt to dynamic network conditions. Moreover, in
those areas where 5G deployment is incomplete (e.g., the 5G net-
work deployment rate in Latin America is only 16% [ 3]), there is
often a lack of relevant network traffic data for operators to conduct
effective network planning. A feasible approach is to estimate the
network traffic to assist the network planning and optimization.
By utilizing estimated traffic, operators can grasp potential net-
work changes in advance, so that they can refer to the estimated
traffic to test the performance under different optimization strate-
gies and choose the best solution to improve the networks (i.e.,
counterfactual analysis [24]).
4828
KDD ’24, August 25–29, 2024, Barcelona, Spain Haoye Chai, Tao Jiang, and Li Yu
The traffic estimation above is essentially a conditional genera-
tion process, which captures the correlation between network traffic
data and various factors of regions such as geography and popu-
lation. Typically, it uses generative methods to synthetic network
traffic with the characteristics of a specific geographic area. The
methods can capture complex features of network traffic data with
high diversity, which attracts attention from many researchers [ 27,
28,32,39]. Wang et al. [32] combined RNN and Generative Adver-
sarial Network (GAN) to generate mobile traffic, aiming to capture
the temporal dependencies of the time-series data. Xu et al. [35]
proposed a SpectraGAN framework that transformed mobile traffic
data into images and integrated a CNN with GAN to capture the
spatial dependencies of traffic data. To achieve effective network
optimization/planning, the generated traffic data needs to have high
fidelity and the generative model should be easily deployed. How-
ever, existing studies encounter significant limitations concerning
the two requirements.
First, most generative methods are heavily reliant on non-public
data, which makes the model lack reproducibility. For instance, the
AppShot [ 28] utilized many service-level data sources including
Netflix, Twitter, etc., which contained privacy-sensitive information.
The Urban Knowledge Graph (UKG) [ 39] contained a vast amount
of information on urban geographic locations, regional function-
alities, and affiliations. Accessing such data requires collaboration
and authorization from multiple official parties, Moreover, when
planning/optimizing some sensitive and critical areas, e.g.,govern-
ment facilities, substations, research and development centers, the
data within these areas are difficult to directly obtain, making it
challenging to replicate and utilize the generation models.
Second, the controllable generation capabilities of existing mod-
els are relatively poor. Currently, the mainstream generative meth-
ods are based on GANs. Such methods involve training both genera-
tor and discriminator simultaneously, which suffer from instability
during the training process and the phenomenon of mode collapse.
These issues often result in the models only generating fixed pat-
terns of network traffic data and failing to utilize conditions to
generate desired network traffic. Moreover, traditional methods
typically concatenate the conditional vector with the input data
before feeding into the generative network, which is not sufficient
to capture the complex relations between network traffic data and
contextual information, degrading the ultimate generation fidelity.
To address the challenges mentioned above, we aim to develop
a generative framework that can generate network traffic data via
publicly available datasets for arbitrary geographic areas. In this
article, we propose an Open data-based Diffusion model for mobile
traffic generation (OpenDiff), which utilizes satellite remote sensing
imagery, POI, and population data to generate network traffic data
of the target geographic areas. As publicly available data sources,
satellite images, POI, and population data provide comprehensive in-
formation on geographic areas (e.g., natural environments, building
layouts, commercial facilities, and residential distribution), which
can fully reflect the characteristics of human activities. There are
numerous studies have shown a strong correlation between human
activities and network traffic usage [ 9,18,34,36]. We are thus moti-
vated to utilize these public data to assist in generating high-fidelity
network traffic data. On the one hand, to ensure reproducibility,
we designed a multi-positive sample contrastive learning algorithmthat utilizes POI, population distribution, and geographic coor-
dinates to extract human activity features from satellite images,
where the features serve as conditions to guide the generation of
network traffic. The data leveraged during the training process is
entirely public, which addresses the first limitation. On the other
hand, we propose an attention-based classifier-free guidance mod-
ule to improve the controllability of our OpenDiff framework. The
module feeds conditional information with a certain probability,
which can explicitly incorporate the human activity features into
the generation network. The attention-based fusion mechanism
transforms the conditional vectors into queries, while the network
traffic feature vectors are converted into keys and values. The mech-
anism explores the implicit correlations between network traffic
and human activities by calculating their cross-attention scores,
so that the diffusion model can better utilize the conditional infor-
mation to enhance the controllable generation capabilities, which
tackles the second limitation. We summarize the contributions as
follows:
•We propose OpenDiff, a novel diffusion model framework for
controllable generation of mobile traffic data with publicly avail-
able data sources. Through the designed multi-positive sample
contrastive learning algorithm, our framework is capable of ex-
tracting human activity features for arbitrary geographical areas,
thereby guiding the generation of network traffic. Our approach
can provide high-fidelity network traffic data for operators in ar-
eas lacking of historical network traffic data, assisting in network
planning and optimization.
•We design a classifier-free guidance module that can explicitly
input conditional information into the diffusion model. A cross-
attention mechanism is proposed to capture implicit correlations
between human activities and network traffic, thereby enhancing
the model’s controllability.
•We conduct extensive experiments on three real-world datasets
with different city scales. The results demonstrate the proposed
scheme to have high fidelity and good controllability of generating
mobile traffic by 14.36% and 13.05%. OpenDiff has been successfully
deployed on the Jiutian Artificial Intelligence Platform of China
Mobile to assist the operators with network planning, including
BS deployment, energy-saving strategy optimization, and network
resource allocation.
2 PRELIMINARIES AND PROBLEM
FORMULATION
2.1 Classifier-free guidance diffusion model
Denoising Diffusion Probabilistic Model (DDPM) : The underlying
idea of DDPM is to use two Markov chains to characterize the tran-
sition from original data to noise data [ 37]. The forward transition
probability can be expressed as 𝑞(𝑥𝑘|𝑥𝑘−1)=𝑁(√︁
1−𝛽𝑘𝑥𝑘−1,𝛽𝑘I),
where{𝛽𝑘∈(0,1),𝑘∈(1,𝐾)}is a set of scheduled noise weight
andIis an identity matrix. Based on the forward transition prob-
ability, the generated noised data in step kcan be calculated by
𝑥𝑘=√︁
ˆ𝛼𝑘𝑥0+(1−ˆ𝛼𝑘)𝜖, where𝜖∼𝑁(0,I)is the added Gaussian
noise,𝛼𝑘=1−𝛽𝑘andˆ𝛼𝑘=Î𝑘
𝑘′=1𝛼𝑘′. The reversed transition prob-
ability can be expressed as 𝑝𝜃(𝑥𝑘−1|𝑥𝑘)=𝑁(𝜇𝜃(𝑥𝑘,𝑘),𝜎𝜃(𝑥𝑘,𝑘)I),
where𝜇𝜃and𝜎𝜃are the mean and variance, respectively. The
4829Diffusion Model-based Mobile Traffic Generation with Open Data for Network Planning and Optimization KDD ’24, August 25–29, 2024, Barcelona, Spain
subscript𝜃indicates that the value is obtained by a well-trained
neural network 𝜖𝜃named denoising network. By maximizing the
Evidence of Lower BOund (ELBO) with log-likelihood, Ho et al.
[11] proved that the 𝜇𝜃can be parameterized as calculated by
𝜇𝜃(𝑥𝑘,𝑘)=𝛼−0.5
𝑘[𝑥𝑘−𝛽𝑘(1−ˆ𝛼𝑘)−0.5𝜖𝜃(𝑥𝑘,𝑘)], and𝜎𝜃can be
parameterized as 𝜎𝜃(𝑥𝑘,𝑘)=√︁
(1−ˆ𝛼𝑘−1)/(1−ˆ𝛼𝑘)𝛽𝑘. The denois-
ing network can then be optimized by the following objectives:
𝑚𝑖𝑛
𝜃𝐿(𝜃)=𝑚𝑖𝑛
𝜃E𝑥0∼𝑞(𝑥0),𝜖∼𝑁(0,𝐼)[||𝜖−𝜖𝜃(𝑥𝑘,𝑘)||2
2], (1)
where𝜖𝜃(𝑥𝑘,𝑘)is the estimated noise by the denoising network.
Classifier-Free Guidance (CFG) : Classifier-free guidance is a type
of diffusion framework used for conditional generation [ 12]. By
controlling the weights between the condition and the uncondi-
tional generation results, it can generate high-fidelity data while
maintaining good controllability. During the model training phase,
the condition 𝑐is randomly set to 0 with a certain probability 𝑝.
During the inference phase, the results of the conditional and un-
conditional results are combined based on the guidance scale, which
can be represented as follows [22]:
𝜖𝑘+1=(1+𝜇)𝜖𝜃(𝑥𝑘,𝑐)−𝜇𝜖𝜃(𝑥𝑘), (2)
where𝜇is the guidance scale, 𝜖𝜃(𝑥𝑘,𝑐)is the estimated noise when
the input is𝑥𝑘and the conditional information is 𝑐, whereas𝜖𝜃(𝑥𝑘)
is the estimated noise in the absence of conditional information.
Compared to classifier guidance diffusion [ 8], CFG does not require
pre-specifying the number of generating categories with a dedicated
classifier, which reduces the complexity of the model. In addition,
CFG can adjust the weights between conditional and unconditional
results during the inference stage, enhancing the flexibility of the
model’s generation process. For network traffic data generation,
traffic data in different geographical areas typically have a diverse
number of patterns. Using the CFG framework for generation can
effectively adapt to the variability in traffic patterns.
2.2 Contrastive learning
Contrastive Learning (CL) is a type of unsupervised learning method
with the core idea of making the features of similar samples closer
to each other while pushing the features of different samples far-
ther apart [ 5,33]. By creating positive sample pairs (e.g., different
views of the same class data) and negative sample pairs (data from
different classes) from the unlabeled data, CL utilizes neural net-
works to extract features from these sample pairs. Typically, CL
leverages two types of loss functions to guide the neural network
training process, i.e., Contrastive Loss, and InfoNCE. Contrastive
Loss sets a margin to determine positive and negative sample pairs,
it calculates the loss value based on either Euclidean distance or dot
product between one positive-sample pair and one negative-sample
pair. InfoNCE draws inspiration from the concept of cross-entropy
and uses the softmax function to calculate the differences between
one positive-sample pair and multiple negative-sample pairs, which
improves the adaptability of the CL model to large-scale datasets.
The InfoNCE loss can be expressed as
𝐿𝑁𝐶𝐸=−E[𝑙𝑜𝑔𝑒𝑥𝑝(𝑠𝑖𝑚(𝑧𝑖,𝑧𝑗)/𝜏)
Í𝑁
𝑛=1𝑒𝑥𝑝(𝑠𝑖𝑚(𝑧𝑖,𝑧𝑛)/𝜏)], (3)where𝑧𝑖and𝑧𝑗form a positive sample pair, and 𝑧𝑖and𝑧𝑛form
a negative sample pair. The 𝑠𝑖𝑚()function denotes the similarity
between sample pairs and the 𝜏is the temperature parameter to
control the scale of the similarity function.
2.3 Utilized public data
Satellite images. The satellite images provide detailed views of
the Earth’s surface, including urban areas, natural landscapes, and
farmlands, etc. Environmental Systems Research Institute (Esri)1of-
fers publicly available satellite images at various resolutions, along
with corresponding latitude and longitude for each image. In our
experiments, we downloaded images with a zoom level of 15 for
model training.
Population density. We acquire the population density statis-
tics from the WorldPop organization2, which estimates the gridded
population counts with bottom-up or top-down methods. In our
evaluation, we downloaded a 100m-resolution population dataset
for contrastive learning.
Point of Interests. POI are various venues that people visit
during their work, leisure, or travel activities. Utilizing POI dis-
tribution data can effectively infer patterns of human activities in
specific areas, and subsequently, help in estimating the usage of net-
work traffic. In our evaluations, we manually crawled POI data for
various cities from Tencent Maps services3, including 14 different
categories, along with the corresponding number of POIs within
each category, which can be found in detail in Appendix A.1.2.
2.4 Problem statement
We aim to use regional features as conditional information 𝐶to
assist the model 𝐷in generating high-fidelity network traffic. Given
the target geographic area 𝑖, our goal is to generate a time sequence
S𝑖={𝑠𝑖
𝑡}𝑡∈(0,𝑇), where𝑠𝑖
𝑡represents the aggregated mobile traf-
fic of all the base stations within 𝑖at time𝑡. We intend to utilize
open dataPincluding satellite images, POI distributions, and pop-
ulation density data so that the generation model 𝐷is capable of
using readily available data to produce high-fidelity traffic data.
The conditional generation problem can be defined as:
Given the target area 𝑖, generating the corresponding mobile traffic
sequence S𝑖=D(C∼P) , whereC∼P denote feature extraction
process of conditional information Cfrom public dataP.
However, it is nontrivial to realize the above goal. There are
three challenges to be tackled during the generation process. i). The
multiple types of public data Pshould be effectively utilized to
extract the regional features. ii). The model Dneeds to explicitly
incorporate condition information to enhance its controllability. iii).
The correlation between regional features Cand network traffic is
required to be captured to improve generation fidelity.
3 METHOD
3.1 Framework overview
To tackle the challenges above, we propose the OpenDiff framework
that incorporates three modules: multi-positive contrastive learning
1https://www.esri.com/en-us/home
2https://www.worldpop.org
3https://lbs.qq.com
4830KDD ’24, August 25–29, 2024, Barcelona, Spain Haoye Chai, Tao Jiang, and Li Yu
Figure 1: OpenDiff generation framework.
module, classifier-free guidance module, and adaptive conditioning
module, as illustrated in Figure 1.
i).Multi-positive contrastive learning module : unlike traditional
CL algorithms that construct a single positive sample [ 10,25], we
use multidimensional public data Pincluding population, POI, geo-
graphical locations to construct multiple positive samples, allowing
for efficient extraction of regional features in satellite images.
ii).Probabilistic conditioning module : we employ the CFG diffu-
sion model framework, which explicitly includes conditions during
both training and inference processes, enhancing the controllability
of the modelD.
iii).Attention-based fusion module : we introduce a mutual atten-
tion mechanism that enables the denoising network to adaptively
capture the correlation between conditional information Cand
mobile network traffic, thereby improving the generation fidelity.
3.2 Multi-positive contrastive learning module
We design a contrastive learning algorithm with multiple positive
samples to extract regional features from satellite images, where
three types of public data are used: POI categories and quantities,
population counts, and geographical coordinates.
3.2.1 Constructing Positive samples. Unlike traditional CL algo-
rithms that use flipping or cropping to create different views of
samples, we construct the positive samples for the original satellite
image𝑢𝑖(referred to as anchor) based on the similarity of POI dis-
tribution, population distribution, and geographical proximity. To
quantify the similarity of POI and population, we first calculate the
POI and population information contained in each satellite image
within its geographic coverage range. The POI information can
be defined as 𝑓𝑂
𝑖={𝑜𝑖
𝑘}𝑘=1:𝐾, where𝑜𝑖
𝑘denotes the number of
type-k POI and Kis the overall type of POI categories. Similarly, the
population information is represented as 𝑓𝐻
𝑖={ℎ𝑖𝑚}𝑚=1:𝑀, where
ℎ𝑖𝑚is the population density in the sub-region 𝑚and𝑀is the total
number of sub-regions in 𝑢𝑖. Note that the number of sub-regions
is determined by the resolution of the population data. For example,
if we have a size of 2 Km* 2 Km satellite image and population data
with a resolution of 100 m, then the number of sub-regions wouldbe 20* 20 = 400. Then, the similarity of both POI and population
can be expressed as
𝑠𝑖𝑚𝑂
𝑖,𝑗=𝑓𝑂
𝑖·𝑓𝑂
𝑗
||𝑓𝑂
𝑖||×||𝑓𝑂
𝑗||, 𝑠𝑖𝑚𝐻
𝑖,𝑗=𝑓𝐻
𝑖·𝑓𝐻
𝑗
||𝑓𝐻
𝑖||×||𝑓𝐻
𝑗||, (4)
where𝑠𝑖𝑚𝑂
𝑖,𝑗and𝑠𝑖𝑚𝐻
𝑖,𝑗are the POI similarity and population simi-
larity between image 𝑢𝑖and𝑢𝑗, respectively. To quantify geograph-
ical proximity, we directly calculate the Euclidean distance based
on the two images’ center coordinates. In each training round, we
choose three images that are closest to the anchor image 𝑢𝑖in terms
of POI, population, and geographical location as positive samples,
denoted as𝑢𝑂
𝑖,𝑢𝐻
𝑖, and𝑢𝐷
𝑖, while the remaining images are used
as negative samples.
3.2.2 Learning regional features. Given the positive set P𝑖with
multiple positive samples P𝑖={𝑢𝑂
𝑖,𝑢𝐻
𝑖,𝑢𝐷
𝑖}and the negative set
N𝑖for anchor𝑥𝑖, we develop a convolutional neural network 𝑅
that utilizes ResNet 50 [ 30] as backbone together with a multi-layer
perception (MLP) layer to map the satellite images into the low
dimensional representations, which can be expressed as
𝑧𝑖=𝑅(𝑢𝑖), 𝑧𝑝=𝑅(𝑢𝑝), 𝑧𝑛=𝑅(𝑢𝑛), 𝑝∈P𝑖, 𝑛∈N𝑖, (5)
where𝑧𝑖,𝑧𝑝, and𝑧𝑛are the learned latent features of the anchor
image, the three positive image samples, and the negative samples,
respectively. During the training process, the CL network should
minimize the distance between 𝑧𝑖and𝑧𝑝while enlarging the differ-
ence between 𝑧𝑖and𝑧𝑛. To achieve this goal, we extend the InfoNCE
loss in Equation 3 to accommodate multiple positive samples, so
that the model can capture the similarity between samples:
𝐿=∑︁
𝑖∈𝐼−1
|P𝑖|∑︁
𝑝∈P𝑖𝑙𝑜𝑔𝑒𝑥𝑝(𝑧𝑖·𝑧𝑝/𝜏)Í
𝑎∈P𝑖∪N𝑖𝑒𝑥𝑝(𝑧𝑖·𝑧𝑎/𝜏), (6)
where𝐼is the total number of training sample, |P𝑖|is its cardinality.
Currently, we only consider three types of regional features: POI,
population, and geographical location, i.e.|P𝑖|=3. According to
the loss function defined above, we can train the CL network 𝑅
to capture the similarity between the anchor and positive samples
while distinguishing them from negative samples. Once the network
4831Diffusion Model-based Mobile Traffic Generation with Open Data for Network Planning and Optimization KDD ’24, August 25–29, 2024, Barcelona, Spain
converges, we can obtain the representations 𝑧𝑖corresponding to
the current satellite image 𝑢𝑖. We employ the CL framework to
extract features from satellite images, using information such as
POI and population density to guide the model’s training. This
enables extracted representation to possess certain human activity
features. Then, we input the extracted features as conditions to
denoising network to guide the mobile traffic generation process.
3.3 Probabilistic conditioning module
The Probabilistic Conditioning (PC) module utilizes a classifier-free
guidance framework to incorporate the features 𝑧𝑖that are sent
from the multi-positive contrastive learning module as conditional
information. It simultaneously trains the network on both condi-
tional inputs and unconditional inputs with a predefined probability
𝜌. Given the denoising network 𝜖𝜃, the latent vector of noised traffic
data𝑥𝑖
𝑡for region𝑖and conditional information 𝑧𝑖, the input of the
denoising network during the training process can be expressed as
𝑃𝑟{𝜖𝜃(𝑥𝑖
𝑡|𝑧𝑖)}=1−𝜌, 𝑃𝑟{𝜖𝜃(𝑥𝑖
𝑡|∅)}=𝜌, (7)
where∅denotes the conditional information is set to zero. During
the inference process, a hyperparameter 𝜇is adopted to control the
guidance scale of the generation results, which is formulated as
ˆ𝜖𝜃,𝜌(𝑥𝑖
𝑡,𝑡|𝑧𝑖,𝜇,𝜌)=(1+𝜇)𝜖𝜃,𝜌(𝑥𝑖
𝑡,𝑡|𝑧𝑖)−𝜇𝜖𝜃,𝜌(𝑥𝑖
𝑡,𝑡).(8)
We control the proportion of satellite image features in the de-
noising network through the classifier-free guidance framework.
This approach effectively reduces the model’s reliance on condi-
tional information, enhances the diversity of traffic data generated
by the model, and mitigates the risk of model overfitting. Con-
sequently, the two hyperparameters in the module 𝜌and𝜇have
significant impacts on the generation performance. In the evalu-
ation section, we conducted ablation experiments on these two
parameters to determine the optimal values.
3.4 Attention-based integration module
After passing through the PC module, the feature vector of satellite
images is fed into the denoising network with a probability 𝜌. Re-
garding the input conditional information, we design the Attention-
based Integration (AI) module to capture the relations between
regional features and mobile network traffic. Specifically, for the
conditional information 𝑧𝑖and the latent vector 𝑥𝑖
𝑡of noised traffic
data, the adaptive module employs scaled dot-product attention,
where𝑥𝑖
𝑡serves as the query and 𝑧𝑖serves as both the key and
value, which can be expressed as
𝑄𝑡
𝑖=𝑊𝑄𝑥𝑡
𝑖, 𝐾𝑡
𝑖=𝑊𝐾{𝑧𝑖,0}𝜌, 𝑉𝑡
𝑖=𝑊𝑉{𝑧𝑖,0}𝜌, (9)
where𝑊𝑄,𝑊𝐾, and𝑊𝑉are weights of linear projection. The
{𝑧𝑖,0}𝜌denotes the values within the set are set to either 𝑧𝑖or
zero vector with the probability 𝜌consistent with the CFG module.
Afterward, the cross-attention value can be calculated by
𝐴𝑡
𝑖=𝑆𝑜𝑓𝑡𝑚𝑎𝑥(𝑄𝑡
𝑖𝐾𝑡⊤
𝑖√
𝑑)𝑉𝑡
𝑖, (10)
where𝐾𝑡⊤
𝑖is the transpose operation of 𝐾𝑡
𝑖. By calculating the
attention score, the denoising network passes the score and originallatent vectors of mobile traffic data 𝑥𝑡
𝑖to a feedforward network
and outputs the conditioning features, which can be represented as
𝑦𝑡
𝑖=F(F(𝐴𝑡
𝑖,𝑥𝑡
𝑖)), (11)
whereFis the layer norm and feed-forward networks. The zero
vector in Equation 9 is employed to align the input dimensions
of the linear layer of attention mechanism, which facilitates the
network design. In addition, a zero vector can signify that the
input vector does not contain any conditional information, allowing
the attention algorithm to differentiate between conditional and
unconditional inputs. After acquiring the hidden feature 𝑦𝑡
𝑖from
the AI module, the denoising network will be trained with the
objective in Equation 1.
4 PERFORMANCE EVALUATION
We perform evaluations on real-world datasets to answer the fol-
lowing research question.
•RQ1: How does the proposed model perform in fidelity com-
pared with existing baseline schemes?
•RQ2: How is the controllability of our model?
•RQ3: How do conditions including POI, population, and
geographical adjacent, impact generation performance?
4.1 Evaluation settings
4.1.1 Mobile traffic dataset and metrics. . We collect mobile traffic
datasets from three Chinese cities: Beijing, Shanghai, and Nan-
jing. We aim to verify the accuracy of the generated data with two
metrics: Mean Absolute Error (MAE) and Root Mean Square Error
(RMSE), meanwhile evaluating the fidelity of the generated data
distribution with two metrics: Jensen-Shannon Divergence (JSD)
and Continuous Ranked Probability Score (CRPS) [ 23]. Detailed de-
scriptions of the dataset and metrics can be found in Appendix A.1.
4.1.2 Baselines. For evaluating the generation performance of our
proposed scheme, we choose 6 baselines that comprise both the
GAN-based schemes and diffusion model-based schemes.
transGAN The baseline [ 17] leveraged a transformer block-
based generative structure, where multi-scale discriminators were
constructed to capture the features of mobile traffic data.
tcnGAN. The baseline investigated the temporal correlation of
mobile traffic sequence with Temporal Convolutional Networks
(TCNs) [ 2]. We manually coded a GAN network with TCNs as the
generator and discriminator.
KEGAN. The Knowledge-Enhanced GAN (KEGAN) [ 14] is a
hierarchical GAN framework that utilizes a self-constructed Urban
Knowledge Graph (UKG). The embeddings of UKG are concate-
nated with the noise vectors so that the GAN network implicitly
captures the relationship between conditional information and net-
work traffic.
CSDI. The baseline is a conditional diffusion model that is de-
signed for time series imputation and prediction [ 29]. To realize the
generation task, we set the condition mask in the original version
to ones-matrix.
spectraGAN. The baseline [ 35] converted the mobile traffic
generation as an image generation problem, which adopted Convo-
lutional Neural Networks (CNNs) to extract regional features for
geographical patches.
4832KDD ’24, August 25–29, 2024, Barcelona, Spain Haoye Chai, Tao Jiang, and Li Yu
Table 1: Mobile traffic generation performance in Nanjing and Beijing datasets. Bold numbers denote the best results and
𝑢𝑛𝑑𝑒𝑟𝑙𝑖𝑛𝑒 numbers denote the second-best results. Δdenotes the improvement between the best value and the second-best value.
Datasets Nanjing
Beijing
Metrics JSD
MAE RMSE CRPS JSD
MAE RMSE CRPS
transGAN 0.7433±0.00236
0.5808±0.00149 0.6366±0.00357 0.8205±0.00110 0.5605±0.00388
0.4512±0.00349 0.5250±0.00425 0.4575±0.00765
tcnGAN 0.2509±0.00276 0.2176±0.00308 0.2671±0.00383 0.2444±0.00250 0.4225±0.01039
0.2514±0.00591 0.3255±0.00581 0.5741±0.00731
KEGAN 0.2194±0.00589 0.3209±0.00121
0.3802±0.00115 0.2186±0.00276 0.2049±0.00533 0.2115±0.00226
0.2731±0.00339 0.4367±0.00743
CSDI 0.2419±0.00625 0.1869±0.00232 0.2267±0.00303 0.2227±0.00237 0.2231±0.00688
0.1561±0.00193 0.1947±0.00238 0.4265±0.00788
sp
ectraGAN 0.2743±0.00567 0.5572±0.00228 0.6835±0.00299 0.2133±0.00191 0.2670±0.00382
0.4465±0.00573 0.5508±0.00713 0.4264±0.00782
Op
enDiff(Ours) 0.2088±0.00318 0.1665±0.00336 0.2036±0.00446 0.2017±0.00251 0.1962±0.00479
0.1365±0.00170 0.1759±0.00210 0.3961±0.00781
Δ 5.08% 12.25% 11.35% 8.38% 4.43%
14.36% 10.69% 7.65%
ADAPTIVE. ADAPTIVE [ 39] is a transfer generative model for
mobile traffic data. The algorithm also leverages the UKG and a BS
aligning scheme to transfer the knowledge from one city to another.
4.2 Mobile traffic generation fidelity (RQ1)
Table 1 shows the experimental results of mobile traffic generation.
It can be seen that our proposed OpenDiff algorithm performs the
best in generating traffic under different city scales (Beijing and
Nanjing). Compared to the current baselines, our algorithm can im-
prove generation performance by up to 12.25%. This demonstrates
the effectiveness of the algorithm, indicating that the model can
effectively capture the correlation between network traffic and ge-
ographic regions, thus improving generation accuracy. In addition,
we can observe that diffusion model-based methods perform better
in terms of MAE and RMSE, suggesting that diffusion models are
capable of generating data that is closer to real-world situations
compared to GAN-based methods. Regarding the generation results
of the Shanghai dataset, please refer to Appendix A.2.
4.3 Conditional traffic generation (RQ2)
To verify the controllability of the generation capability, we set the
model to generate specific traffic patterns. Specifically, we first se-
lect the indices corresponding to the traffic patterns in each dataset.
For example, in the Beijing dataset, the indices closest to traffic
pattern 2 are found to be 10, 21, and 23. When generating traffic
data with the model, we input the conditional information (i.e., the
embeddings learned from satellite images) corresponding to the
indices (i.e., 10,21, and 23) into the model to test its data generation
performance. The results are shown in Table 2. Compared to CSDI,
which does not use geographic information as conditions, both
spectraGAN and the OpenDiff model exhibit better conditional
generation performance. This is because both models can capture
the correlation between the geographical environment and the cor-
responding network traffic. When specific geographical features
are provided as conditional input, the models can utilize these cor-
relations to perform relevant generation. Additionally, spectraGAN
only considers information within a single patch, i.e.,the geograph-
ical proximity, and lacks consideration of human activity features,
leading to a decrease in generation performance.
4.4 Ablation study (RQ3)
We investigate the influence of regional-related elements (i.e., geo-
graphical proximity, population distribution, POI distribution) inTable 2: Performance of conditional mobile traffic genera-
tion. We provide the model with conditional information
corresponding to patterns 0, 1, and 2 for each city.
Dataset Beijing
Shanghai Nanjing
Metric JSD
CSDIPattern-0 0.1881
0.4804 0.2477
Pattern-1 0.1582
0.4866 0.2301
Pattern-2 0.2367
0.4790 0.3111
sp
ectraGANPattern-0 0.1739
0.4582 0.1837
Pattern-1 0.1325
0.4740 0.1755
Pattern-2 0.1932
0.4558 0.2214
Op
enDiff (Our)Pattern-0 0.1596
0.4389 0.1758
Pattern-1 0.1172
0.4624 0.1607
Pattern-2 0.1833
0.4186 0.1911
ΔPattern-0 8.96
% 4.39 % 4.49 %
Pattern-1 13.05
% 2.51 % 9.21 %
Pattern-2 5.41%
8.89 % 15.86 %
Table 3: Impact of geographical proximity, population, and
POI on model performance. Ψrepresents the degradation
when removing corresponding elements from the model.
Dataset Beijing
Metric
JSD Ψ MAE Ψ RMSE Ψ CRPS Ψ
No-Ge
o 0.1994 -10.78 0.1391 -2.04 0.1799 -1.60 0.4060 -30.59
No-Human 0.1998 -14.49 0.1378 -6.63 0.1799 -5.32 0.4059 -33.88
No-POI 0.2048 -9.29 0.1408 -2.55 0.1803 -3.72 0.4068 -32.23
OpenDiff (Our) 0.1962 - 0.1365 - 0.1759 - 0.3961 -
the condition information. Ψrepresents the performance degrada-
tion when removing certain modules from the proposed OpenDiff,
which can be expressed as
Ψ=(𝑦𝑂𝑝𝑒𝑛𝐷𝑖𝑓𝑓−𝑦𝑖)/(𝑦𝑂𝑝𝑒𝑛𝐷𝑖𝑓𝑓−𝑦𝑐𝑠𝑑𝑖), (12)
where𝑦𝑖is the performance values of different baselines of abla-
tion experiments, and 𝑦𝑐𝑠𝑑𝑖is the values of different metrics of
CSDI. The reason we designed Ψin this way is that both CSDI and
OpenDiff are methods based on the diffusion model. By comparing
the performance gap between the two models, we can accurately
quantify the gains from our designed denoising network or condi-
tional information to the network performance, ensuring that these
gains are not merely the result of converting a GAN model into a
diffusion model.
Specifically, during the multi-positive samples contrastive learn-
ing process, we removed specific elements, for example, "No-Human"
represents the absence of population distribution data during the
4833Diffusion Model-based Mobile Traffic Generation with Open Data for Network Planning and Optimization KDD ’24, August 25–29, 2024, Barcelona, Spain
Table 4: Impact of probabilistic conditioning module and
attention-based integration module on model performance.
Ψrepresents the degradation when removing corresponding
elements from the model.
Datasets Beijing
Metrics JSD Ψ CRPS Ψ MAE Ψ RMSE Ψ
Op
enDiff (Our) 0.1962 - 0.3961 - 0.1365 - 0.1759 -
OpenDiff-NA 0.2031 -25.65% 0.4033 -23.68% 0.1407 -21.43% 0.1807 -25.53%
OpenDiff-NC 0.2054 -34.20% 0.4056 -31.25% 0.1398 -16.83% 0.1797 -20.21%
Datasets Nanjing
Metrics JSD Ψ CRPS Ψ MAE Ψ RMSE Ψ
Op
enDiff (Our) 0.2088 - 0.2017 - 0.1665 - 0.2036 -
OpenDiff-NA 0.2187 -29.90% 0.2103 -40.95% 0.1821 -76.47% 0.2209 -74.89%
OpenDiff-NC 0.2240 -45.92% 0.2124 -50.95% 0.1793 -62.75% 0.2157 -52.38%
Datasets Shanghai
Metrics JSD Ψ CRPS Ψ MAE Ψ RMSE Ψ
Op
enDiff (Our) 0.2321 - 0.4633 - 0.1454 - 0.1919 -
OpenDiff-NA 0.2359 -15.63% 0.4760 -55.45% 0.1479 -8.41% 0.2046 -62.56%
OpenDiff-NC 0.2396 -30.75% 0.4786 -66.81% 0.1464 -3.37% 0.2027 -53.20%
model training. All the extracted embeddings are input into the dif-
fusion model for data generation. The experimental results shown
in Table 3 indicate that removing different elements has varying im-
pacts on the overall model performance. Among them, population
density distribution has the greatest impact on the model, reaching
33.88%. This is because population density directly affects the num-
ber of users of the mobile network. Intuitively, lower population
density leads to less network traffic.
We have implemented the ablation experiment of classifier-free
guidance module and adaptive conditioning module in Table 4. In
terms of the data distribution metrics (JSD and CRPS), the two
modules can increase the model’s performance by up to 66.81%
and 55.45% (as indicated in the Shanghai dataset), respectively; in
terms of data amplitude error metrics (MAE and RMSE), the two
modules can enhance the model’s generative ability by up to 76.47%
and 62.75% (as indicated in the Nanjing dataset), respectively. We
believe the reason for the results is that the classifier-free guidance
module can effectively guide the conditional information using
the guidance scale 𝜇and conditioning probability 𝜌, aligning the
generative network traffic data more closely with the conditional
information, thereby improving the accuracy of the generated dis-
tribution. On the other hand, the adaptive conditioning module
utilizes a cross-attention mechanism to adaptively capture the im-
plicit correlations between conditional information and network
traffic, which enhances the generation fidelity.
5 DEPLOYMENT APPLICATIONS
In this section, we discuss how the generated network traffic can be
deployed in real network planning and optimization scenarios. Our
network traffic data generation model has been deployed on the
Jiutian Artificial Intelligence (AI) Platform1. The Platform is China
Mobile’s self-developed AI innovation platform, providing intelli-
gent decision-making support for mobile networks. The framework
of the Jiutian platform is illustrated in Figure 2. Our model acts
as a key part of the platform to generate network traffic data (the
red part in the figure), by which we implement optimization and
planning applications and evaluate the network performance (the
1https://jiutian.10086.cn/open
Figure 2: Framework of Jiutian AI platform.
green parts in the figure). For different application scenarios, the
proposed OpenDiff framework has different usages:
i). Generating predictive network traffic data for the current
geographical region. By learning the distribution of historical traf-
fic within a specific geographical area, the model can estimate
the network traffic over a certain period in the future for that re-
gion. Operators can utilize this estimated traffic data to proactive
optimize networks, such as optimizing BS sleep strategies and
scheduling network spectrum resources.
ii). Transferring the trained model to generate network traffic in
any other geographical region. The model takes publicly available
data for the target region, including satellite images, population
density, and POI distribution. The OpenDiff then generates the
network traffic data as the potential user demands for the target
area. Operators can use the estimated network traffic demands to
make network planning for the target area, such as BS deployment.
We aim to demonstrate that operators can utilize the network
traffic generated by our algorithm for network planning and op-
timization. We validate the effectiveness of our generated traffic
through three application scenarios: traffic load-based BS sleep
strategy, traffic load-aware resource allocation, and traffic demand-
based BS deployment.
5.1 Traffic load-based BS sleep strategy
We consider a traffic-based BS sleep strategy to save energy con-
sumption. We set a total of 𝑚base stations and 𝑛cells in the Jiutian
platform. Each base station corresponds to one BaseBand Unit
(BBU), and each cell corresponds to one Remote Radio Unit (RRU).
Within each cell, there is a network traffic load 𝑠𝑛that needs to be
served (generated by the OpenDiff algorithm or derived from the
real world). The RRU in each cell can choose to enter a sleep mode
and offload its traffic load to another neighboring cell. The energy
consumption of BSs can be divided into three parts: RRU, BBU, and
air conditioner [20], which can be represented as:
𝑘𝑛𝑡𝑛+𝑏𝑛|     {z     }
RRU𝑃𝑟𝑛+𝑐𝑚|{z}
BBU𝑃𝑏𝑚+𝑘𝑚[𝑐𝑚+∑︁
𝑅𝑅𝑈 𝑛∈𝐵𝑆𝑚(𝑘𝑛𝑡𝑛+𝑏𝑛)]+𝑏𝑚
|                                            {z                                            }
Air conditioner 𝑃𝑎𝑚,𝑛,(13)
where𝑘𝑛,𝑏𝑛,𝑘𝑚, and𝑘𝑚are the slopes and truncations of RRU 𝑛
and BBU𝑚obtained by the linear regression. The 𝑡𝑛denotes the
network traffic on RRU, 𝑐𝑚is a constant representing the energy
4834KDD ’24, August 25–29, 2024, Barcelona, Spain Haoye Chai, Tao Jiang, and Li Yu
(a) Sleep strategy optimization.
 (b) Resource allocation results.
 (c) BS deployment results.
Figure 3: Network planning and optimization results via generated network traffic.
consumption of BBU. Denoting the BS sleep strategy as binary
variables𝛼𝑛∈{0,1}, our energy saving problem can be defined as:
𝑚𝑖𝑛𝐸(𝛼𝑛)=∑︁
𝑛𝛼𝑛𝑃𝑟
𝑛+∑︁
𝑚(𝑃𝑏
𝑚+∑︁
𝑛𝛼𝑛𝑃𝑎
𝑚,𝑛),
𝑠.𝑡. 𝛼𝑛𝑡𝑛≤𝑐𝑛,∑︁
𝑛𝛼𝑛𝑡𝑛≥∑︁
𝑛𝑠𝑛,(14)
where𝑐𝑛is the maximum network traffic capacity that cell 𝑛can
accommodate. The first constraint ensures that the network traffic
accommodated by each active cell cannot exceed its service capacity,
and the second constraint ensures that all network services should
be fulfilled. We use an integer programming approach to solve the
problem as shown in Figure 3(a). The sleep strategy obtained via
the generated traffic data has a similar effect to that of the real
traffic, and the energy consumption is significantly reduced com-
pared to the scenario without a sleep strategy, which demonstrates
the efficacy of our generative scheme. In practice, we can use the
OpenDiff algorithm to preemptively generate network traffic load
and proactively provide the optimal sleep strategy for BSs.
5.2 Traffic load-aware resource allocation
In addition to BS sleep strategy optimization, we can use the gen-
erated traffic as the prediction of the network load to optimize
the scheduling of Physical Resource Blocks (PRBs). In the Jiutian
platform, we define 𝑥users,𝑦base stations, and 𝑧PRBs. Each user
has a network traffic load of 𝑑𝑥and can associate with one BS by
binary variable 𝛽𝑥,𝑦to request one PRB by binary variable 𝛾𝑥,𝑧[13],
the Signal-to-Interference-plus-Noise ratio (SINR) between users
and BSs can be represented as:
𝑟𝑧
𝑥,𝑦=𝛽𝑥,𝑦𝛾𝑥,𝑧𝑝𝑥ℎ𝑥,𝑦
𝜎+Í
𝑥′≠𝑥𝛽𝑥′,𝑦𝛾𝑥′,𝑧𝑝𝑥′ℎ𝑥′,𝑦, (15)
where𝑝𝑥is the transmit power of user 𝑥and𝜎is the Gaussian
noise, and𝛽𝑥,𝑦𝛾𝑥,𝑧𝑝𝑥ℎ𝑥,𝑦is used to calculate the received signal
power of the user 𝑥to base station 𝑦. Our goal is to maximize
network channel capacity meanwhile minimizing the utilization
of PRBs, with the satisfaction of users’ network demands, i.e.,
𝑚𝑎𝑥Í
𝑥𝐵𝑙𝑜𝑔(1+𝑟𝑧𝑥,𝑦)−𝜏Í
𝑥𝛾𝑥,𝑧, where𝐵is broadband and 𝜏
is the punishment parameter. The experimental results, as shown
in Figure 3(b), indicate that using generated network data closely
approximates the system performance of real network data. ThisTable 5: Coverage rate of different BS deployment strategies.
Time POI-based Business-based Generated traffic-based
t=0 83.28% 81.29% 86.21%
t=30 81.27% 80.30% 86.13%
t=50 80.11% 78.51% 85.32%
demonstrates that the proposed OpenDiff algorithm can generate
user traffic demands that closely resemble real-world scenarios,
thereby guiding system resource allocation.
We currently assume that each user can access at most one PRB
and do not consider the scenario where a user is assigned multiple
PRBs simultaneously. In practical scenarios, operators can redefine
the objective function based on actual PRB allocation strategies.
By utilizing the generated network traffic, operators can proac-
tively monitor changes in network traffic and dynamically schedule
wireless resources based on the network load, which can reduce
network response latency and greatly enhance user experience.
5.3 Traffic demand-based BS deployment
In real network planning, a crucial issue is how to deploy base
stations in new areas. Network traffic serves as a vital reference
for the deployment of BSs. However, in new areas, there is often a
lack of historical traffic data, making the deployment particularly
challenging. In this case, we can utilize our OpenDiff to generate
synthetic mobile traffic data to guide the deployment of BSs.
We design four naive BS deployment strategies by utilizing: gen-
erated network traffic density (generated traffic-based), POI distri-
bution density (POI-based), the distribution of commercial districts
(business-based), and uniform deployment within the area (aver-
age). Our testing scenario covers a 256 km ×256 km region in
Beijing, which is further divided into 256 areas. We assume there
are a total of 2000 BSs to be deployed within the overall region. The
deployment method is deploying BS in proportion to the density
of different data sources within each area. We evaluate the deploy-
ment performance via the JSD and cosine similarity, indicating the
distribution matching degrees between different deployment strate-
gies and the real deployment in Beijing. The results are shown in
Figure 3(c), where the distribution of the generated traffic-based
scheme is closest to the distribution of real BSs (with the lowest JSD
4835Diffusion Model-based Mobile Traffic Generation with Open Data for Network Planning and Optimization KDD ’24, August 25–29, 2024, Barcelona, Spain
and the highest cosine similarity), demonstrating the effectiveness
of using synthetic network traffic for BS deployment.
In addition, to assess the performance of different BS deployment
strategies, we resort to network coverage ratio for mobile users.
We assume each BS can cover an average of 3000 users within its
communication range, and the number of users that can be covered
is calculated based on the total number of BSs in each area. The
mobility of users between different areas is also considered, which
is calculated via the gravity model. In the model, the population
flow between two areas is proportional to their population counts
(denoted as𝑀𝑖and𝑀𝑗), and inversely proportional to the square of
the distance between them (denoted as 𝐷𝑖,𝑗), which can be expressed
as𝐹𝑖,𝑗=𝐺𝑀𝑖𝑀𝑗
𝐷2
𝑖,𝑗. The coverage results are listed in Table 5, it can be
observed that using the generated traffic-based approach achieves
the maximum coverage ratio, and it remains effective when the
mobile users move between different areas, This is because our
adopted OpenDiff method utilizes both POI and population data to
generate network traffic for better characterization of the implicit
correlation between network traffic and the environment, which
aids in the optimization of BS deployment strategies.
6 RELATED WORK
Mobile Traffic Prediction and Generation. Mobile traffic synthesis
is widely regarded as a time-series forecasting problem to assist
network planning and optimization [ 38], which can be broadly clas-
sified into two categories: traffic prediction and generation. Mobile
traffic prediction involves modeling future data based on the his-
torical data’s features, which utilizes sequence modeling schemes
such as auto-regressive, recurrent Neural Networks (RNN), and
LSTM [ 4,6,40] to capture the temporal correlations of network
traffic. WANG et al. [31] proposed a Q-learning-based mechanism
to update the LSTM network, so that the LSTM network can bet-
ter predict network traffic. Li et al. [19] adopted a combination
of GCN and attention mechanism to simultaneously capture the
relationships between traffic data in both temporal and spatial do-
mains. Whereas the prediction-based schemes fail to capture the
complex distributions and show weakness in data diversity. More-
over, existing works primarily focused on the temporal correlations
of network traffic, which failed to capture the correlation between
contextual information and mobile traffic. Mobile traffic generation
leverages generative models to directly learn the implicit distribu-
tion of data and can generate diverse data at any moment through
sampling. For example, Ring et al. [27] utilized three GANs to gener-
ate multiple network flows. Lin et al. [21] proposed DoppelGanger
for generating both the meta attributes and series features. Wang et
al.[32] proposed an RNN-based GAN for generating cellular traffic,
which captures the temporal dependencies of time-series data. In
addition, generative methods can incorporate condition informa-
tion during the model training process, which can represent the
potential correlations between the environment and network traffic
distribution, enhancing the fidelity of the generation performance.
Conditional Generation for Mobile Traffic. To capture the corre-
lation between contextual and mobile traffic, existing literature
proposed to extract the features of the environment and use them
as conditions for the generative networks. Xu et al. [35] proposed
a SpectraGAN framework that considered multiple city contextslike POI, and land use as the initial embeddings of GANs. Hui et al.
[14] constructed the contextual embeddings for each BS to generate
mobile traffic within the coverage. They also generated the mobile
traffic of IoT devices by feeding the features of devices [ 15]. Sun et
al.[28] developed a city context-empowered generated scheme
from a web service level. Zhang et al [39] proposed a transferring
learning paradigm based on hierarchical GANs, where a UKG align-
ing scheme was proposed to enhance the generation performance
of mobile traffic across multiple cities.
Discussion. However, the current methods for generating net-
work traffic predominantly rely on non-public data. For instance,
Urban Knowledge Graphs (UKGs) were proposed for network data
generation [ 14,39], which require the construction of the com-
plex relationships between POIs. The AppShot [ 28] utilized many
service-level data sources including Netflix, Twitter, etc., which con-
tain privacy-sensitive information. Obtaining such data requires col-
laboration and authorization from multiple parties, which weakens
the replicability of models. Furthermore, the mainstream generation
methods are based on GAN models, which simultaneously train two
networks and suffer from mode collapse during the training process.
This leads to the models only generating fixed network traffic pat-
terns regardless of conditional information. Therefore, we aim to
generate network traffic within the diffusion model framework by
using entirely publicly available data, to enhance the replicability of
the model while ensuring its capability for conditional generation.
7 CONCLUSION
In this paper, we propose a diffusion model-based generative frame-
work that utilizes openly available datasets including satellite im-
ages, population, and POI data. Through a multi-positive sample
contrastive learning algorithm, the framework captures the implicit
correlations between network traffic data and urban environments.
Meanwhile, by designing an attention-based fusion mechanism,
we enhance the controllable generation capability of the frame-
work. Evaluation results demonstrate that our scheme improves
fidelity and controllability by 14.06% and 13.05%, respectively. Our
model can generate network traffic for arbitrary regions using pub-
licly available data sources, showing excellent deployability and
reproducibility. Our framework has been deployed on the Jiutian
intelligent platform of China Mobile, where we apply the gener-
ated network data to various practical scenarios, including resource
scheduling, sleep strategies, and BS deployment. The test results
prove that utilizing generated network data can effectively assist
operators in network planning and optimization.
ACKNOWLEDGEMENT
This research has been supported in part by the National Key Re-
search and Development Program of China under Grant 2023YFB2904801,
the National Natural Science Foundation of China under Grants
62171260 and U22B2057, and the China Postdoctoral Science Foun-
dation under Grant 2023M742010.
4836KDD ’24, August 25–29, 2024, Barcelona, Spain Haoye Chai, Tao Jiang, and Li Yu
REFERENCES
[1]Telecommunication Development Industry Alliance. 2023. Global 5G/6G Industry
Development Report. https://aimg8.dlssyht.cn/u/551001/ueditor/file/276/551001/
1679536723602475.pdf.
[2]Shaojie Bai, J. Zico Kolter, and Vladlen Koltun. 2018. An Empirical Evalua-
tion of Generic Convolutional and Recurrent Networks for Sequence Modeling.
arXiv:1803.01271
[3] Alexandra Borgeaud. 2023. 5G deployment by country in Latin America 2023.
[4]Alisson Assis Cardoso and Flávio Henrique Teles Vieira. 2019. Generation of
Synthetic Network Traffic Series Using a Transformed Autoregressive Model
Based Adaptive Algorithm. IEEE Latin America Transactions 17, 08 (2019), 1268–
1275.
[5]Ting Chen, Simon Kornblith, Mohammad Norouzi, and Geoffrey Hinton. 2020. A
simple framework for contrastive learning of visual representations. In Proceed-
ings of the 37th International Conference on Machine Learning (ICML’20). JMLR.org,
Article 149, 11 pages.
[6]Anestis Dalgkitsis, Malamati Louta, and George T. Karetsos. 2018. Traffic fore-
casting in cellular networks using the LSTM RNN. In Proceedings of the 22nd
Pan-Hellenic Conference on Informatics (Athens, Greece) (PCI ’18). Association
for Computing Machinery, New York, NY, USA, 28–33. https://doi.org/10.1145/
3291533.3291540
[7]Dingsheng Deng. 2020. DBSCAN clustering algorithm based on density. In 2020
7th international forum on electrical engineering and automation (IFEEA). IEEE,
949–953.
[8]Prafulla Dhariwal and Alexander Nichol. 2021. Diffusion models beat gans on
image synthesis. Advances in neural information processing systems 34 (2021),
8780–8794.
[9]Jiahui Gong, Yu Liu, Tong Li, Haoye Chai, Xing Wang, Junlan Feng, Chao Deng,
Depeng Jin, and Yong Li. 2023. Empowering Spatial Knowledge Graph for Mobile
Traffic Prediction. In Proceedings of the 31st ACM International Conference on
Advances in Geographic Information Systems (<conf-loc>, <city>Hamburg</city>,
<country>Germany</country>, </conf-loc>) (SIGSPATIAL ’23). Association for
Computing Machinery, New York, NY, USA, Article 24, 11 pages. https://doi.
org/10.1145/3589132.3625569
[10] Kaiming He, Haoqi Fan, Yuxin Wu, Saining Xie, and Ross Girshick. 2020. Mo-
mentum Contrast for Unsupervised Visual Representation Learning. In 2020
IEEE/CVF Conference on Computer Vision and Pattern Recognition (CVPR). 9726–
9735. https://doi.org/10.1109/CVPR42600.2020.00975
[11] Jonathan Ho, Ajay Jain, and Pieter Abbeel. 2020. Denoising Diffusion Probabilistic
Models. arXiv:2006.11239 [cs.LG]
[12] Jonathan Ho and Tim Salimans. 2022. Classifier-free diffusion guidance. arXiv
preprint arXiv:2207.12598 (2022).
[13] Wenzhen Huang, Tong Li, Yuting Cao, Zhe Lyu, Yanping Liang, Li Yu, Depeng Jin,
Junge Zhang, and Yong Li. 2023. Safe-NORA: Safe Reinforcement Learning-based
Mobile Network Resource Allocation for Diverse User Demands. In Proceed-
ings of the 32nd ACM International Conference on Information and Knowledge
Management. 885–894.
[14] Shuodi Hui, Huandong Wang, Tong Li, Xinghao Yang, Xing Wang, Junlan Feng,
Lin Zhu, Chao Deng, Pan Hui, Depeng Jin, and Yong Li. 2023. Large-Scale Urban
Cellular Traffic Generation via Knowledge-Enhanced GANs with Multi-Periodic
Patterns.
[15] Shuodi Hui, Huandong Wang, Zhenhua Wang, Xinghao Yang, Zhongjin Liu,
Depeng Jin, and Yong Li. 2022. Knowledge Enhanced GAN for IoT Traffic Gener-
ation.
[16] Spherical Insights. 2023. 2024 Telecom Business Insights. https://www.
sphericalinsights.com.
[17] Yifan Jiang, Shiyu Chang, and Zhangyang Wang. 2021. TransGAN: Two
Pure Transformers Can Make One Strong GAN, and That Can Scale Up.
arXiv:2102.07074 [cs.CV]
[18] Zhao jie Yang, Jie Lin, and Yu shu Yang. 2021. Identification of network behavioral
characteristics of high-expertise users in interactive innovation: The case of forum
autohome. Asia Pacific Management Review 26, 1 (2021).
[19] He Li, Duo Jin, Xuejiao Li, Jianbin Huang, Xiaoke Ma, Jiangtao Cui, Deshuang
Huang, Shaojie Qiao, and Jaesoo Yoo. 2023. DMGF-Net: An Efficient Dynamic
Multi-Graph Fusion Network for Traffic Prediction. ACM Trans. Knowl. Discov.
Data 17, 7, Article 97 (apr 2023), 19 pages.
[20] Tong Li, Li Yu, Yibo Ma, Tong Duan, Wenzhen Huang, Yan Zhou, Depeng Jin,
Yong Li, and Tao Jiang. 2023. Carbon emissions of 5G mobile networks in China.
Nature Sustainability 6, 12 (2023), 1620–1631.
[21] Zinan Lin, Alankar Jain, Chen Wang, Giulia Fanti, and Vyas Sekar. 2020. Using
GANs for Sharing Networked Time Series Data: Challenges, Initial Promise, and
Open Questions.
[22] Qidong Liu, Fan Yan, Xiangyu Zhao, Zhaocheng Du, Huifeng Guo, Ruiming Tang,
and Feng Tian. 2023. Diffusion Augmentation for Sequential Recommendation. In
Proceedings of the 32nd ACM International Conference on Information and Knowl-
edge Management (<conf-loc>, <city>Birmingham</city>, <country>United King-
dom</country>, </conf-loc>) (CIKM ’23). Association for Computing Machinery,New York, NY, USA, 1576–1586. https://doi.org/10.1145/3583780.3615134
[23] James E. Matheson and Robert L. Winkler. 1976. Scoring Rules for Continuous
Probability Distributions. (1976).
[24] Navid Naderializadeh, Mark Eisen, and Alejandro Ribeiro. 2020. Wireless Power
Control via Counterfactual Optimization of Graph Neural Networks. In 2020 IEEE
21st International Workshop on Signal Processing Advances in Wireless Communi-
cations (SPAWC). 1–5.
[25] Taesung Park, Alexei A. Efros, Richard Zhang, and Jun-Yan Zhu. 2020. Contrastive
Learning for Unpaired Image-to-Image Translation. In Computer Vision – ECCV
2020, Andrea Vedaldi, Horst Bischof, Thomas Brox, and Jan-Michael Frahm (Eds.).
Springer International Publishing, Cham, 319–345.
[26] Fiana Raiber and Oren Kurland. 2017. Kullback-Leibler Divergence Revisited. In
Proceedings of the ACM SIGIR International Conference on Theory of Information Re-
trieval (Amsterdam, The Netherlands) (ICTIR ’17). Association for Computing Ma-
chinery, New York, NY, USA, 117–124. https://doi.org/10.1145/3121050.3121062
[27] Markus Ring, Daniel Schlör, Dieter Landes, and Andreas Hotho. 2019. Flow-based
network traffic generation using Generative Adversarial Networks. Computers
and Security 82 (2019).
[28] Chuanhao Sun, Kai Xu, Marco Fiore, Mahesh K. Marina, Yue Wang, and Cezary
Ziemlicki. 2022. AppShot: A Conditional Deep Generative Model for Synthesizing
Service-Level Mobile Traffic Snapshots at City Scale. IEEE Transactions on Network
and Service Management 19, 4 (2022).
[29] Yusuke Tashiro, Jiaming Song, Yang Song, and Stefano Ermon. 2021. CSDI: Con-
ditional Score-based Diffusion Models for Probabilistic Time Series Imputation.
arXiv:2107.03502 [cs.LG]
[30] Dhananjay Theckedath and RR Sedamkar. 2020. Detecting affect states using
VGG16, ResNet50 and SE-ResNet50 networks. SN Computer Science 1 (2020), 1–7.
[31] Xiaojie Wang, Laisen Nie, Zhaolong Ning, Lei Guo, Guoyin Wang, Xinbo Gao,
and Neeraj Kumar. 2022. Deep Learning-Based Network Traffic Prediction for
Secure Backbone Networks in Internet of Vehicles. ACM Trans. Internet Technol.
22, 4 (2022).
[32] Zi Wang, Jia Hu, Geyong Min, Zhiwei Zhao, and Jin Wang. 2021. Data-
Augmentation-Based Cellular Traffic Prediction in Edge-Computing-Enabled
Smart City. IEEE Transactions on Industrial Informatics 17, 6 (2021), 4179–4187.
https://doi.org/10.1109/TII.2020.3009159
[33] Jiancan Wu, Xiang Wang, Fuli Feng, Xiangnan He, Liang Chen, Jianxun Lian,
and Xing Xie. 2021. Self-supervised Graph Learning for Recommendation. In
Proceedings of the 44th International ACM SIGIR Conference on Research and
Development in Information Retrieval (Virtual Event, Canada) (SIGIR ’21). As-
sociation for Computing Machinery, New York, NY, USA, 726–735. https:
//doi.org/10.1145/3404835.3462862
[34] Yanxin Xi, Tong Li, Huandong Wang, Yong Li, Sasu Tarkoma, and Pan Hui.
2022. Beyond the First Law of Geography: Learning Representations of Satellite
Imagery by Leveraging Point-of-Interests. In Proceedings of the ACM Web Confer-
ence 2022 (Virtual Event, Lyon, France) (WWW ’22). Association for Computing
Machinery, New York, NY, USA, 3308–3316. https://doi.org/10.1145/3485447.
3512149
[35] Kai Xu, Rajkarn Singh, Marco Fiore, Mahesh K. Marina, Hakan Bilen, Muhammad
Usama, Howard Benn, and Cezary Ziemlicki. 2021. SpectraGAN: Spectrum Based
Generation of City Scale Spatiotemporal Mobile Network Traffic Data.
[36] Weiwei Yan and Yin Zhang. 2019. User behaviors and network characteristics of
US research universities on an academic social networking site. Higher Education
78 (2019), 221–240.
[37] Yuan Yuan, Jingtao Ding, Chenyang Shao, Depeng Jin, and Yong Li. 2023. Spatio-
temporal Diffusion Point Processes. In Proceedings of the 29th ACM SIGKDD
Conference on Knowledge Discovery and Data Mining (<conf-loc>, <city>Long
Beach</city>, <state>CA</state>, <country>USA</country>, </conf-loc>) (KDD
’23). Association for Computing Machinery, New York, NY, USA, 3173–3184.
https://doi.org/10.1145/3580305.3599511
[38] Junhui Zhang, Jiqiang Tang, Xu Zhang, Wen Ouyang, and Dongbin Wang. 2015.
A survey of network traffic generation. In Third International Conference on
Cyberspace Technology (CCT 2015). 1–6. https://doi.org/10.1049/cp.2015.0862
[39] Shiyuan Zhang, Tong Li, Shuodi Hui, Guangyu Li, Yanping Liang, Li Yu, Depeng
Jin, and Yong Li. 2023. Deep Transfer Learning for City-Scale Cellular Traffic
Generation through Urban Knowledge Graph.
[40] Feiyue Zhu, Lixiang Liu, and Teng Lin. 2020. An LSTM-Based Traffic Prediction
Algorithm with Attention Mechanism for Satellite Network. In Proceedings of the
2020 3rd International Conference on Artificial Intelligence and Pattern Recognition
(Xiamen, China) (AIPR ’20). Association for Computing Machinery, New York,
NY, USA, 205–209. https://doi.org/10.1145/3430199.3430208
4837Diffusion Model-based Mobile Traffic Generation with Open Data for Network Planning and Optimization KDD ’24, August 25–29, 2024, Barcelona, Spain
A APPENDIX
A.1 Description of datasets
A.1.1 Mobile traffic datasets. TheBeijing dataset covers mobile
traffic data of 4000 BSs in Beijing during one week in October 2021.
TheShanghai dataset contains the mobile traffic every 30 minutes
from 5326 BSs over 150,000 users around Shanghai between August
1st and August 28th, 2019. The Nanjing dataset covers mobile
traffic data from over 4000 BSs serving surpass 100,000 users in
Nanjing between February 2nd and March 31st, 2021.
We set the time intervals of the network traffic sequence to be 1
hour. Additionally, to align with the geographical regions of satellite
images, we aggregated the traffic of BSs based on the geographical
coordinates corresponding to the satellite images. This allowed us
to obtain the overall traffic within the geographical scope of each
satellite image. Subsequently, we employed DBSCAN clustering [ 7],
an algorithm that does not require specifying cluster centers, to
cluster the traffic data and calculate the typical number of traffic
patterns within the dataset, as shown in Figure 4. There are three
typical traffic patterns in the Beijing and Shanghai datasets and
four typical traffic patterns in the Nanjing dataset.
A.1.2 Metrics. We choose four types of metrics to investigate the
performance of the algorithms.
JSD. The Jensen–Shannon Divergence (JSD) is a commonly used
metric to measure the similarity between two distributions. Since
the JSD calculation requires both vectors to follow a probability
distribution format, which means that the sum of the elements in
each vector must equal 1, we need to preprocess the generated
network traffic data. For the generated network traffic data vector
ˆ𝑆={ˆ𝑠𝑡}𝑡=0:𝑇, We convert it into a probability distribution form by
ˆ𝑃={ˆ𝑠𝑡/Í
𝑡ˆ𝑠𝑡}𝑡=0:𝑇. Similarly, we convert the real network traffic
data into a probability distribution form 𝑃. Then, the JSD can be
formulated as:
𝐽(𝑃,ˆ𝑃)=√︄
𝐾𝐿(𝑃||ˆ𝑃)+𝐾𝐿(ˆ𝑃||𝑃)
2, (16)
where𝐾𝐿()is the Kullback-Leibler divergence [26].
MAE. The Mean Absolute Error (MAE) metric evaluates the
similarity of the generated network traffic data ˆ𝑆and the real traffic
data𝑆, which can be calculated as:
𝑀(𝑆,ˆ𝑆)=1
𝑇𝑇∑︁
𝑡=1|𝑠𝑡−ˆ𝑠𝑡|. (17)
RMSE. The Root Mean Square Error (RMSE) measures the square
root of the average squared differences between the real traffic data
𝑆and generated network traffic data ˆ𝑆, which can be expressed as:
𝑅(𝑆,ˆ𝑆)=vut
1
𝑇𝑇∑︁
𝑡=1(𝑠𝑡−ˆ𝑠𝑡)2. (18)
CRPS. The Continuous Ranked Probability Score (CRPS) [ 23]
measures how well an estimated probability distribution aligns with
an observed dataset. It serves as a metric to assess the accuracy of a
generative distribution. A lower CRPS value indicates higher quality
in the generated distribution. Given the cumulative distribution
function (CDF) ˆ𝐶that can be calculated based on the probabilitydistribution ˆ𝑃, the CRPS can be formulated as:
𝐶𝑅𝑃𝑆(ˆ𝐶,𝑆)=∫∞
−∞(ˆ𝐶(𝑦)−𝐻(𝑦−𝑆))2𝑑𝑦, (19)
where𝐻(𝑦−𝑆)is the Heaviside step function, which is 0 for 𝑦<𝑆
and 1 for𝑦≥𝑆.
(a) Three patterns in Beijing dataset.
(b) Three patterns in Shanghai dataset.
(c) Four patterns in Nanjing dataset.
Figure 4: The traffic patterns in different datasets.
Table 6: Mobile traffic generation performance in Shanghai
dataset. Bold numbers denote the best results and 𝑢𝑛𝑑𝑒𝑟𝑙𝑖𝑛𝑒
numbers denote the second-best results. Δdenotes the im-
provement between the best value and the second-best value.
OpenDiff has good generative performance in the four met-
rics.
Metric JSD
MAE RMSE CRPS
transGan 0.7632±0.00054
0.2624±0.00421 0.3390±0.00313 0.8377±0.00111
TCNGan 0.3258±0.00152 0.2644±0.00548 0.3331±0.00575 0.4789±0.00144
KEGAN 0.2420±0.00275 0.2035±0.00306
0.2537±0.00253 0.4791±0.01151
CSDI 0.2564±0.00483 0.1751±0.00106 0.2122±0.00132 0.4862±0.01698
sp
ectralGan 0.3014±0.00233 0.2029±0.00205 0.2589±0.00264 0.4873±0.01796
OpenDiff (Our) 0.2321±0.00479 0.1454±0.00125 0.1919±0.00152 0.4633±0.01714
Δ 4.27 20.43 10.58 3.37
A.2 Mobile traffic generation performance of
the Shanghai dataset
We also conducted the traffic data generation evaluation on the
Shanghai dataset, as shown in Table 6. It can be observed that our
OpenDiff algorithm also achieves the best generation performance.
Similar to the results in Table 1, diffusion model-based models
perform well overall in terms of MAE and RMSE, while GAN-based
models perform well in terms of JSD and CRPS.
4838