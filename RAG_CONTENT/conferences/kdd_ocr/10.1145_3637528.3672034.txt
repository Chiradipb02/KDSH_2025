Learning the Covariance of Treatment Effects
Across Many Weak Experiments
Aurélien Bibaut∗
Netflix
Los Gatos, CA, United StatesWinston Chou
Netflix
Los Gatos, CA, United States
Simon Ejdemyr
Netflix
Los Gatos, CA, United StatesNathan Kallus
Netflix
Los Gatos, CA, United States
Cornell University
New York, NY, United States
ABSTRACT
When primary objectives are insensitive or delayed, experimenters
may instead focus on proxy metrics derived from secondary out-
comes. For example, technology companies often infer the long-
term impacts of product interventions from their effects on short-
term user engagement signals. We consider the meta-analysis of
many historical experiments to learn the covariance of treatment ef-
fects on these outcomes, which can support the construction of such
proxies. Even when experiments are plentiful, if treatment effects
are weak, the covariance of estimated treatment effects across ex-
periments can be highly biased. We overcome this with techniques
inspired by weak instrumental variable analysis. We show that Lim-
ited Information Maximum Likelihood (LIML) learns a parameter
equivalent to fitting total least squares to a transformation of the
scatterplot of treatment effects, and that Jackknife Instrumental
Variables Estimation (JIVE) learns another parameter computable
from the average of Jackknifed covariance matrices across experi-
ments. We also present a total covariance estimator for the latter
estimand under homoskedasticity, which is equivalent to a 𝑘-class
estimator. We show how these parameters can be used to construct
unbiased proxy metrics under various structural models. Lastly, we
discuss the real-world application of our methods at Netflix.
CCS CONCEPTS
•Computing methodologies →Learning linear models; •
Mathematics of computing →Multivariate statistics .
KEYWORDS
surrogate outcomes, meta-analysis, weak instrumental variables
ACM Reference Format:
Aurélien Bibaut, Winston Chou, Simon Ejdemyr, and Nathan Kallus. 2024.
Learning the Covariance of Treatment Effects Across Many Weak Experi-
ments. In Proceedings of the 30th ACM SIGKDD Conference on Knowledge
∗Corresponding author, contact at abibaut@netflixcontractors.com.
This work is licensed under a Creative Commons Attribution
International 4.0 License.
KDD ’24, August 25–29, 2024, Barcelona, Spain
©2024 Copyright held by the owner/author(s).
ACM ISBN 979-8-4007-0490-1/24/08.
https://doi.org/10.1145/3637528.3672034Discovery and Data Mining (KDD ’24), August 25–29, 2024, Barcelona, Spain.
ACM, New York, NY, USA, 10 pages. https://doi.org/10.1145/3637528.3672034
1 INTRODUCTION
Projecting long-term treatment effects from short-term metrics is
a ubiquitous problem in experimentation. For example, technol-
ogy companies seek to optimize insensitive primary metrics (such
as habitual usage, subscriber retention, and long-term revenue),
but are unable or unwilling to measure treatment effects on these
metrics precisely.1To address this issue, they optimize a suite of
secondary metrics that are associated with the primary metrics, but
more sensitive in terms of signal-to-noise and easier to measure in
short-term experiments. Under certain assumptions, the treatment
effect on a “surrogate index” of multiple secondary metrics yields a
precise estimate of the long-term treatment effect [4, 17].
A class of statistical parameters that intuitively relates to the
problem of constructing proxy metrics for a primary metric is
the covariance matrix of true average treatment effects (ATEs)
on primary and secondary metrics in previous experiments, and
functions thereof. For example, when constructing weighted indices
of secondary outcomes, it is intuitive to consider the Ordinary (OLS)
and Total Least Squares (TLS) regression of true ATEs on a primary
outcome on true ATEs on the secondary outcomes in the scatterplot
of true ATEs over available historical experiments. Here, by true
ATE, we mean the unobserved mean on the population, in contrast
to the estimated ATE actually observed on the experimental sample.
How these statistical parameters actually connect to the question
of proxy metrics or surrogates is the first question we investigate
in this paper. In Section 3, we demonstrate that statistical features
of the covariance matrix of true ATEs have causal interpretations
under different causal models. For instance, under these models,
they can support inference on effects of novel treatments on long-
term outcomes based on short-term observations.
The second question we study is the estimation of the covariance
matrix of the true ATEs when the signal-to-noise ratio is small in
each experiment, as is often the case in digital experimentation
[8,16,20]. The statistical challenges are analogous to the many
weak instrumental variables (IVs) setting. One question of interest
in the weak instrument literature is whether allowing the number
1For example, they may be interested in the effect of digital platform design on long-
term user retention [ 12], but unwilling to run a sufficiently large experiment for a long
time to measure treatment effects on long-term retention.
 
153
KDD ’24, August 25–29, 2024, Barcelona, Spain Aurélien Bibaut, Winston Chou, Simon Ejdemyr, and Nathan Kallus
of instruments to diverge while holding their strength fixed yields
consistent estimates [ 15]. Analogously, we show that increasing
the number of experiments, even if each maintains a low signal-to-
noise ratio, enables consistent estimation of the covariance matrix
of true treatment effects. In fact, each of the three methods we study
has a weak-instrument estimator counterpart.
Our results demonstrate that we can reliably estimate the co-
variance matrix of true treatment effects as a parameter at the
meta-analytic level, that is, from experiment-level aggregates. In
this way, we contribute to an emerging literature on meta-analytic
approaches to surrogacy [ 7,9,18], which is particularly relevant
given the large number of experiments conducted on modern on-
line experimentation platforms. The sheer volume of historical data
from these platforms often makes unit-level analysis computation-
ally challenging, if not prohibitive [ 19]. Therefore, our methods
are not only statistically robust, but also operationally feasible for
large-scale experimentation.
The paper is organized as follows:
•In Section 2, we present the data collection process and the
statistical parameters.
•In Section 3, we discuss the relationship of the statistical
parameters to causal parameters and the construction of
proxy metrics.
•In Section 4, we present weak-IV-inspired estimators of the
covariance matrix of true treatment effects and the OLS and
TLS estimands in the scatterplot of true ATEs.
•In Section 5, we conduct a simulation study to illustrate the
performance of our proposed estimators and provide visual
intuition on the mechanics of some of our estimators.
•Lastly, in Section 6, we describe the real-world application
of our methods to derive a linear surrogate index for experi-
mentation at Netlix.
2 STATISTICAL SETUP AND NOTATION
2.1 Data
We observe 𝑁unit-level quadruples 𝑂=(𝑇,𝐴,𝑆,𝑌)where𝑇∈
{1,...,𝐾}is the experiment index, 𝐴∈{0,1}is the treatment arm
index,𝑆is a(𝐺−1)-dimensional vector of secondary metrics, and
𝑌is the primary metric of interest. We observe 𝑁=𝐾𝑛units di-
vided between 𝐾experiments, each of which has two arms with
𝑛units.2Units in different experiments may be drawn from dif-
ferent superpopulations, but are assigned uniformly completely
at random to cells. The observations 𝑂1,...,𝑂𝑁∼𝑂are each
identically distributed. They may not be independent due to the re-
striction of having exactly 𝑛units in each experiment. Conditional
on𝑇1,...,𝑇𝑁and𝐴1,...,𝐴𝑁, any two observations are nonetheless
independent.
2.2 Treatment-effect Covariance Matrix
For any𝑡=1,...,𝐾 , let𝜏𝑆(𝑡)=𝐸[𝑆|𝐴=1,𝑇=𝑡]−𝐸[𝑆|𝐴=
0,𝑇=𝑡]and𝜏𝑌(𝑡)=𝐸[𝑌|𝐴=1,𝑇=𝑡]−𝐸[𝑌|𝐴=0,𝑇=𝑡]be
the true ATEs in experiment 𝑡on the vector 𝑆and on the scalar 𝑌,
2While our results extend to the more realistic setting of multiple treatment arms of
varying size per experiment, we focus on the two-arm, constant sample size case for
ease of exposition.respectively. Let
Λ𝐾=Λ𝑌𝑌,𝐾 Λ𝑇
𝑆𝑌,𝐾
Λ𝑆𝑌,𝐾 Λ𝑆𝑆,𝐾
with
Λ𝑌𝑌,𝐾=1
𝐾𝐾∑︁
𝑡=1𝜏𝑌(𝑡)2− 
1
𝐾𝐾∑︁
𝑡=1𝜏𝑌(𝑡)!2
,
Λ𝑆𝑌,𝐾=1
𝐾𝐾∑︁
𝑡=1𝜏𝑆(𝑡)𝜏𝑌(𝑡)− 
1
𝐾𝐾∑︁
𝑡=1𝜏𝑆(𝑡)!  
1
𝐾𝐾∑︁
𝑡=1𝜏𝑌(𝑡)!
,
Λ𝑆𝑆,𝐾=1
𝐾𝐾∑︁
𝑡=1𝜏𝑆(𝑡)𝜏𝑆(𝑡)⊤− 
1
𝐾𝐾∑︁
𝑡=1𝜏𝑆(𝑡)!  
1
𝐾𝐾∑︁
𝑡=1𝜏𝑆(𝑡)!⊤
.
That is, Λ𝐾is the covariance matrix of true ATEs across the primary
metric and secondary metrics over the population of experiments.
We assume throughout that Λ𝑆𝑆,𝐾 is positive definite, meaning all
its eigenvalues are strictly positive. Note that this requires at least
𝐾≥𝐺−1tests.
2.3 Statistical Parameters
We consider two statistical parameters. Our first parameter is
𝜃1(Λ𝐾)=Λ−1
𝑆𝑆,𝐾Λ𝑆𝑌,𝐾.
This is the OLS in the scatterplot of the 𝐾true treatment effects.
While we discuss the exact causal interpretation of this parameter
(which requires structural assumptions) in the next section, intu-
itively the OLS measures the statistical relationship between the
surrogate metrics and the long-term metric [18].
Our second parameter is more complex:
𝜃2,Ψ(Λ𝐾)=−𝛾Ψ,𝑆(Λ𝐾)/𝛾Ψ,𝑌(Λ𝐾),
where[𝛾Ψ,𝑌(Λ𝐾),𝛾Ψ,𝑆(Λ𝐾)𝑇]𝑇is a generalized eigenvector solv-
ing(Λ𝐾−𝜅Ψ)𝛾=0for the smallest possible 𝜅≥0for which a
solution exists, where Ψis a given positive definite matrix. The pa-
rameter𝜃2,Ψ(Λ𝐾)is the TLS on the Ψ−1/2-transformed scatterplot
of true treatment effects. While this parameter is less intuitive, we
show below that it coincides with 𝜃1(Λ𝐾)under certain structural
assumptions.
We emphasize that these OLS and TLS parameters are defined
in terms of only 𝐾points in a𝐺-dimensional scatterplot. The lo-
cation of these points themselves (the true ATEs) are, nonetheless,
unknown population quantities. Therefore, 𝜃1(Λ𝐾)is a popula-
tion quantity, meaning it is a function of the unknown population
distribution of the data 𝑂(that is, of infinite draws of 𝑂).
3 CAUSAL MODELS AND RELATIONSHIP TO
PROXIES
We now consider various causal models and examine how the sta-
tistical parameters 𝜃1(Λ𝐾)and𝜃2(Λ𝐾)relate to causal parameters
in these models. Equivalently, this section derives the structural
assumptions under which these statistical parameters can be given
a causal interpretation in terms of the effect of 𝑆on𝑌and thereby
used to construct proxy metrics for 𝑌.
 
154Learning the Covariance of Treatment Effects Across Many Weak Experiments KDD ’24, August 25–29, 2024, Barcelona, Spain
3.1 Linear Structural Model without Direct
Effects
Consider the following linear structural model with experiment-
level fixed-effects and unmeasured confounding 𝑈between𝑆and
𝑌:
𝑆=𝜇𝑆(𝑇)+𝜋𝑆(𝑇)𝐴+𝛾𝑈+𝜂
𝑌=𝜇𝑌(𝑇)+𝑆𝛽+𝛿𝑈+𝜖.
Here,𝜋𝑆(𝑇)is the(𝐺−1)×1vector of first-stage effects in ex-
periment𝑇(that is, the ATEs on the 𝐺−1secondary metrics 𝑆of
the intervention trialed in experiment 𝑇),𝜇𝑆(𝑇)is a(𝐺−1)×1
vector of per-experiment fixed effects on 𝑆, and𝜇𝑌(𝑇)is a scalar
per-experiment fixed effect on 𝑌.
Suppose that 𝐴is randomized, and that the errors are such that
𝐸[𝜂|𝑆,𝑈,𝐴]=0and𝐸[𝜖|𝑆,𝑈,𝐴]=0. Then the statistical
estimands𝜏𝑆(𝑡)and𝜏𝑌(𝑡)identify the causal parameters 𝜋𝑆(𝑡)and
𝜋𝑆(𝑡)𝛽. It is straightforward to check that under the data-generating
process induced by this structural model,
𝛽=𝜃1(Λ𝐾)=𝜃2,Ψ(Λ𝐾)
for any positive definite Ψ. The equality of the two statistical param-
eters can be understood as follows. Under the DGP induced by the
above structural model, in which 𝑆fully mediates the effect of 𝐴on
𝑌,𝜏𝑌(𝑡)=𝜏𝑆(𝑡)𝛽for every𝑡∈[𝐾]. This implies that[1,−𝛽]𝑇is an
eigenvector associated with eigenvalue 0, which must be the small-
est as Λ𝐾is positive semi-definite. Therefore, the TLS estimand is
also the OLS estimand.
Relationship to proxies. Now consider a new experiment 𝑇=𝐾+1,
in which we also randomize units equiprobably between treatment
(𝐴=1) and control ( 𝐴=0). Denoting 𝑆(𝑡,𝑎),𝑌(𝑡,𝑎)the potential
outcomes generated by the structural model (that is, the random
variables obtained by setting values 𝑇=𝑡and𝐴=𝑎and sampling
𝑈and the error terms in the above equations), the ATE on 𝑌is
related to the difference in arm-specific means on 𝑆as follows:
𝐸[𝑌(𝐾+1,1)−𝑌(𝐾+1,0)]
=𝐸[𝑆(𝐾+1,1)−𝑆(𝐾+1,0)]𝛽
=(𝐸[𝑆|𝑇=𝐾+1,𝐴=1]−𝐸[𝑆|𝑇=𝐾+1,𝐴=0])𝜃𝑖(Λ𝐾),
where𝑖=1or𝑖=(2,Ψ). In words, given the data-generating
distribution in 𝐾historical experiments in which we observe 𝑌
and𝑆, and the data-generating distribution in an experiment in
which we observe only the short-term outcome 𝑆, we can estimate
the ATE on the long-term outcome. That is, ℎ(𝑆)=𝜃𝑖(Λ𝐾)𝑆is an
unbiased surrogate index for 𝑌, meaning that ATEs on ℎ(𝑆)equal
ATEs on𝑌.
3.2 Linear Structural Model with
INSIDE-consistent Direct Effects
We now enrich the above linear structural model with direct effects
𝜋𝑌(𝑇)on𝑌that are not mediated by 𝑆:
𝑆=𝜇𝑆(𝑇)+𝜋𝑆(𝑇)𝐴+𝛾𝑈+𝜂
𝑌=𝜇𝑌(𝑇)+𝜋𝑌(𝑇)𝐴+𝑆𝛽+𝛿𝑈+𝜖.
It is generally impossible to disentangle the direct ( 𝜋𝑌(𝑇)) and
indirect/mediated ( 𝜋𝑆(𝑇)𝛽) effects. Still, it is possible to estimatemeaningful causal parameters under the assumption of INstrument
Strength Independent of Direct Effect (INSIDE) from the Mendelian
randomization literature [ 5], which states that the first-stage effects
of𝐴on𝑆are independent of the direct effects of 𝐴on𝑌. In par-
ticular, INSIDE requires that the vector 𝝅𝑌=[𝜋𝑌(1),...,𝜋𝑌(𝐾)]⊤
of direct effects is orthogonal to the columns of the matrix 𝚷𝑆=
[𝜋𝑆(1)⊤,...,𝜋𝑆(𝐾)𝑇]⊤of first-stage effects on 𝑆, that is, 𝝅𝑇
𝑌𝚷𝑆=
0.
Under the data-generating distribution induced by randomized
treatment assignment and the INSIDE-consistent causal model, the
covariance matrix Λ𝐾of true treatment effects is
Λ𝐾=
𝛽𝑇Λ𝑆𝑆,𝐾𝛽(Λ𝑆𝑆,𝐾𝛽)⊤
Λ𝑆𝑆,𝐾𝛽 Λ𝑆𝑆,𝐾
+"𝜋⊤
𝑌𝜋𝑌
𝐾−(𝜋⊤
𝑌1)2
𝐾2 0
0 0 ,#
withΛ𝑆𝑆,𝐾=Π⊤
𝑆Π𝑆
𝐾−1⊤Π𝑆Π⊤
𝑆1
𝐾2.
As can be seen from the above matrix expression, 𝜃1(Λ𝐾)=𝛽
identifies the structural parameter 𝛽. However, with direct effects,
it is no longer the case in general that [1,−𝛽]⊤is an eigenvector of
Λ𝐾and therefore the TLS estimand 𝜃2,Ψ(Λ𝐾)diverges in general
from𝛽.
𝑆-mediated ATE. In the presence of direct effects, it is no longer
the case that ATEs on 𝑌are given by ATEs on 𝑆times𝛽, as𝑆
no longer mediates the effect of the treatment fully. Still, 𝛽, which
coincides with the OLS estimand 𝜃1(Λ𝐾), has a causal interpretation
under the linear structural model. Let us introduce the potential
outcomes𝑆(𝑡,𝑎)and𝑌(𝑡,𝑎,𝑠)generated by the structural model
(that is, the random variables obtained by setting 𝑇=𝑡,𝐴=𝑎,𝑆=𝑠
in the above equations and independently sampling 𝑈and the error
terms). It holds that the natural indirect effect on 𝑌through𝑆is
given by
𝐸[𝑌(𝐾+1,𝑎,𝑆(𝐾+1,1))−𝑌(𝐾+1,𝑎,𝑆(𝐾+1,0)]
=𝐸[𝑆(𝐾+1,1)−𝑆(𝐾+1,0)]𝛽
=(𝐸[𝑆|𝑇=𝐾+1,𝐴=1]−𝐸[𝑆|𝑇=𝐾+1,𝐴=0])𝜃1(Λ𝐾),
for either𝑎∈{0,1}. That is, we can identify from the population
distribution of historical experiments a proxy ℎ(𝑆)=𝜃1(Λ𝐾)𝑆such
that in a new experiment, the ATE on ℎ(𝑆)equals the part of the
effect of the intervention on 𝑌that is mediated by 𝑆.
3.3 Nonparametric IV Model
Relaxing the assumption of linearity, we now consider the following
nonparametric IV model:
𝑆=𝜇𝑆(𝑇)+𝜋𝑆(𝑇)𝐴+𝜂
𝑌=𝜇𝑌(𝑇)+ℎ(𝑆)+𝜖,
where𝐸[𝜂|𝐴,𝑇]=0and𝐸[𝜖|𝐴,𝑇]=0. We now show that,
under some assumptions, 𝜃1identifies a functional of ℎ.
Assumption 1 (Small effects).∥𝜋𝑆(𝑡)∥∞≤𝜖for every𝑡∈[𝐾]
for some𝜖>0.
We will think of 𝜖as a small quantity, which is often reasonable
in digital experiments.
Assumption 2 (Bounded Hessian). ℎis twice-differentiable and∇2ℎ≤𝑀for some𝑀>0, where the norm is the nuclear norm.
 
155KDD ’24, August 25–29, 2024, Barcelona, Spain Aurélien Bibaut, Winston Chou, Simon Ejdemyr, and Nathan Kallus
Proposition 1. Suppose that Assumptions 1-2 hold. Then,
𝜃1(Λ𝐾)= 𝐾∑︁
𝑡=1𝜋𝑆(𝑡)𝜋𝑆(𝑡)⊤!−1𝐾∑︁
𝑡=1𝜋𝑆(𝑡)𝜋𝑆(𝑡)⊤𝐸[∇ℎ(𝑆(𝑡,0))]
+𝑂(𝑀𝜖),
where𝑆(𝑡,0)is the potential outcome generated by the structural
model under the control treatment in experiment 𝑡.
Proof. By definition of 𝜃1(Λ𝐾), the randomization of 𝐴, and
from a second-order Taylor expansion,
𝜃1(Λ𝐾)
= 𝐾∑︁
𝑡=1𝜏𝑆(𝑡)𝜏𝑆(𝑡)⊤!−1𝐾∑︁
𝑡=1𝜋𝑆(𝑡)𝐸[ℎ(𝑆(𝑡,0)+𝜋𝑆(𝑡))−ℎ(𝑆(𝑡,0))]
= 𝐾∑︁
𝑡=1𝜋𝑆(𝑡)𝜋𝑆(𝑡)⊤!−1𝐾∑︁
𝑡=1𝜋𝑆(𝑡)𝜋𝑆(𝑡)⊤𝐸[∇ℎ(𝑆(𝑡,0))]
+ 𝐾∑︁
𝑡=1𝜋𝑆(𝑡)𝜋𝑆(𝑡)⊤!−1𝐾∑︁
𝑡=1𝜋𝑆(𝑡)𝜋𝑆(𝑡)⊤𝐸[∇2ℎ(e𝑆(𝑡,0))𝜏𝑆(𝑡)],
for some e𝑆(𝑡,0)on the segment[𝑆(𝑡,0),𝑆(𝑡,0)+𝜏𝑆(𝑡)]. Assump-
tions 1 and 2 then yield that the second term above is 𝑂(𝑀𝜖).□
In words, Proposition 1 above tells us that under the NPIV
model above, the OLS statistical estimand identifies an instrument-
strength-weighted average of the expected gradient of the structural
functionℎ.
4 ESTIMATING TREATMENT EFFECT
COVARIANCES
In what follows, we will concatenate the variables 𝑆and𝑌in the
vector𝐷=[𝑌,𝑆]and also write 𝜏(𝑡)=[𝜏𝑌(𝑡),𝜏𝑆(𝑡)].
4.1 A Naive Estimator
A naive estimator for the covariance matrix Λ𝐾of true treatment
effects is simply the empirical covariance matrix ˆΣ𝐾of the estimated
ATEsb𝜏𝑆(𝑡)andb𝜏𝑌(𝑡):
bΣ𝐾=1
𝐾𝐾∑︁
𝑡=1b𝜏(𝑡)b𝜏(𝑡)⊤− 
1
𝐾𝐾∑︁
𝑡=1b𝜏(𝑡)!  
1
𝐾𝐾∑︁
𝑡=1b𝜏(𝑡)!⊤
,
withb𝜏(𝑡)=1
𝑛/2Í
𝑖=1:𝐴𝑖=1,𝑇𝑖=𝑡𝐷𝑖−1
𝑛/2Í
𝑖=1:𝐴𝑖=0,𝑇𝑖=𝑡𝐷𝑖.
What is the target estimand of bΣ𝐾? The total variance formula
yields that:
𝐸bΣ𝐾=Λ𝐾+4
𝑛¯Ω𝐾,
where
¯Ω𝐾=1
𝐾𝐾∑︁
𝑡=1Ω𝑡,1+Ω𝑡,0
2
andΩ𝑡,𝑎=Cov(𝐷|𝑇=𝑡,𝐴=𝑎)is the within-cell covariance
matrix of𝐷. In other words, 4¯Ω𝐾/𝑛is the covariance of the unit-
level sampling variance, or “noise.”In industrial (especially digital) experimentation, ATEs typically
exhibit a low signal-to-noise ratio. This implies that the term 4¯Ω𝐾/𝑛
is often significant relative to Λ𝐾[7,16]. As a result, under our first
or second structural model, the estimate of 𝛽based on the empirica
l covariance matrix, b𝛽=bΣ−1
𝑆𝑆,𝐾bΣ𝑆𝑌,𝐾 , is biased and remains incon-
sistent for𝛽even as we increase the number of experiments (that
is, as𝐾→∞ ). Since the two-stage least squares estimator under
a categorical instrument equals OLS on the group means, it holds
thatb𝛽is 2SLS with
•dependent variable (2𝐴−1)𝑌,
•endogenous variable (2𝐴−1)𝑆,
•instrument𝑇.
The fact that b𝛽is biased when noise is non-negligible reflects the
well-established fact that 2SLS is inconsistent under weak instru-
ments [ 2]. This suggests that insights from the weak instrumental
variable literature could improve the estimation of Λ𝐾. In the next
sections, we will consider three different methods inspired by weak
IV estimators: (1) the Jackknife Instrumental Variable estimator
(JIVE), (2) the Limited Information Maximum Likelihood (LIML)
estimator, and (3) the general form of 𝑘-class estimators.
4.2 Jackknifed Covariance Matrix of Treatment
Effects
We propose an estimator of Λ𝐾inspired by the JIVE estimator [ 2].
Consider the transformed vector e𝐷=2(2𝐴−1)𝐷. Observe that
𝐸[e𝐷|𝑇=𝑡]=𝜏(𝑡)=𝐸[𝐷|𝑇=𝑡,𝐴=1]−𝐸[𝐸|𝑇=𝑡,𝐴=0].
For any𝑡,𝑎,𝑖 , let
b𝜏(𝑡)=1
𝑛∑︁
𝑖:𝑇𝑖=𝑡e𝐷𝑖 and b𝜏−𝑖(𝑡)=1
𝑛−1∑︁
𝑗≠𝑖
𝑇𝑗=𝑡e𝐷𝑗
be the estimated ATE on 𝐷in experiment 𝑡, and its counterpart
that leaves out observation 𝑖. Let
bΛ2(𝑡)=1
𝑛∑︁
𝑖:𝑇𝑖=𝑡b𝜏−𝑖(𝑡)e𝐷⊤
𝑖
be the Jackknifed second-order moments matrix in experiment 𝑡,
and let
bΛJK
𝐾=1
𝐾𝐾∑︁
𝑡=1bΛ2(𝑡)− 
1
𝐾𝐾∑︁
𝑡=1b𝜏(𝑡)!  
1
𝐾𝐾∑︁
𝑡=1b𝜏(𝑡)!⊤
be the Jackknifed covariance matrix. The Jackknife construction
ensures that only the common source of variation between units in
the same experiments is captured: the variation due to the treatment
assignment, as opposed to unit-level noise. It is immediate that the
Jackknifed second-order moment matrix is an unbiased estimate of
the second-order moment matrix of the true treatment effects. It
can also readily be checked that under mild conditions the second
order term has bias 𝑂(𝑁−1); in other words, the bias scales with
the total number of units in all experiments as opposed to the
number of observations per experiment. We state this formally in
the following proposition:
Proposition 2. Suppose that max𝑡,𝑎Ω𝑡,𝑎≤𝑀for some𝑀>0,
where the norm is any matrix norm. Then 𝐸[bΛJK
𝐾]=Λ𝐾+𝑂(𝑀/𝑁).
 
156Learning the Covariance of Treatment Effects Across Many Weak Experiments KDD ’24, August 25–29, 2024, Barcelona, Spain
Proof. As the second-order moment Jackknifed matrix 𝐾−1
Í𝐾
𝑡=1bΛ2(𝑡)is an unbiased estimate of 𝐾−1Í
𝑡=1𝜏(𝑡)𝜏(𝑡)⊤, the bias
reduces to that of the second term, which we rewrite as 𝑁−1𝑍𝑁𝑍⊤
𝑁,
where𝑍𝑁=𝑁−1/2Í
𝑖=1e𝐷𝑖−𝐸[e𝐷𝑖]. The (sequence of) random
variables𝑍𝑁can be controlled under various set of conditions.
For example, suppose 0≤𝑚≼Ω𝑡,𝑎≼𝑀<∞for every𝑡,𝑎,
and suppose that 𝐾−1Í
𝑡Ω𝑡,1+Ω𝑡,0→Ωin probability for some
Ω. Then, under a Lyapunov condition, a standard central limit
theorem guarantees that 𝑍𝑁⇝𝑍where𝑍∼ N( 0,Ω). Then
𝐸[(𝑍𝑁𝑍⊤
𝑁)]→𝐸[𝑍𝑍⊤)]≼𝑀𝐼𝐺, which implies the result. □
As a corollary, if it admits a probability limit, the plug-in estima-
tor𝜃𝑖(bΛJK
𝐾)for either𝑖=1or𝑖=(2,Ψ)is a consistent estimator of
the parameter 𝜃𝑖(Λ𝐾)as the number of experiments grows, 𝐾→∞ ,
even as the size of each experiment remains fixed. The former is
equivalent to the JIVE estimator, while the latter is equivalent to
the estimator proposed in [11].
Note that the Jackknifed covariance matrix estimator does not
require homoskedasticity of the unit-level noise — that is, it does
not require Ω𝑎,𝑡=Ωfor all𝑡,𝑎— for consistency. However, it
does require us to Jackknife the unit-level data in every experiment,
which can be computationally prohibitive when 𝑛and𝐾are large.
In the next two sections, we therefore consider how we can leverage
homoskedasticity when it is a reasonable assumption.
4.3 Estimating Treatment Effect Covariances by
Isotropizing Noise
In this section and the next, we assume a common noise covariance
matrix Ωacross all experiments and treatment arms, that is, Ω𝑡,𝑎=
Ωfor every𝑡,𝑎. We will further assume that we know Ωto a
high relative precision. These are often reasonable assumptions in
digital experiments: while treatment effects are small, correlations
across metrics tend to be (1) stable across experiments, and (2) non-
negligible, and thus easy to estimate with a high signal-to-noise
ratio by leveraging populations across multiple experiments (e.g.,
the entire user base). Furthermore, considering metrics that are
sufficiently nonredundant ensures that Ωis well-conditioned.
Under the homoskedasticity assumption, the total covariance
formula yields that
𝐸bΣ𝐾=Λ𝐾+4
𝑛Ω.
Under known Ω, we can multiply bΣ𝐾on both sides by Ω−1/2to
obtain a transformed Λ𝐾plus isotropic noise:
𝐸Ω−1/2bΣ𝐾Ω−1/2=Ω−1/2Λ𝐾Ω−1/2+4
𝑛𝐼𝐺.
Because adding a multiple of the identity to a matrix does not affect
its eigenvectors nor the rank of their corresponding eigenvalues,
the smallest eigenvector of Ω−1/2Λ𝐾Ω−1/2is the smallest eigen-
vector of𝐸Ω−1/2bΣ𝐾Ω−1/2(where by smallest eigenvector we mean
an eigenvector assoicated with the smallest eigenvalue). Denote
this eigenvector by e𝛾𝐾. Because Λ𝐾andΩboth have non-negative
eigenvalues, applying the transformation Ω−1/2also does not affect
the ordering of their eigenvectors, so we can recover the smallest
eigenvector of Λ𝐾by applying Ω−1/2toe𝛾𝐾. Denote by b𝛾𝐾the result
of this procedure applied to the estimate bΣ𝐾itself (that is, ratherthan its unknown expectation), and let b𝜃𝐿𝐼𝑀𝐿𝐾=−b𝛾𝐾,𝑆/b𝛾𝐾,𝑌. Un-
der the existence of the appropriate probability limits, b𝜃𝐿𝐼𝑀𝐿𝐾is a
consistent estimate of 𝜃2,Ω(Λ𝐾).
As our notation suggests, b𝜃𝐿𝐼𝑀𝐿𝐾is equal to the LIMLK (LIML
with Known noise covariance matrix) estimate with dependent
variable e𝑌=2(2𝐴−1)𝑌, endogenous predictors e𝑆=2(2𝐴−1)𝑆,
and instrument 𝑇. (This can be observed directly from the definition
of LIMLK [1].)
As the smallest eigenvector of the covariance matrix of obser-
vations is the statistical target of Total Least Squares (TLS), the
procedure we just described, and thus LIMLK, can be implemented
by: (1) transforming the observations by applying Ω−1/2, (2) run-
ning TLS in the transformed space, and (3) transforming the smallest
eigenvector obtained from TLS by applying Ω−1/2. We illustrate
this procedure visually in Section 5.
A causal inference implication of this method is that, under the
linear structural model presented in subsection 3.1, the structural
coefficient𝛽equals𝜃2,Ω(Λ𝐾), which we can estimate consistently
withb𝜃𝐿𝐼𝑀𝐿𝐾. However, under the presence of direct effects, as men-
tioned in Section 3.2, 𝜃2,Ω(Λ𝐾)no longer equals 𝛽, and therefore
treatment effects on 𝜃2,Ω(Λ𝐾)𝑆cannot be interpreted as the part
of the treatment effect of 𝐴on𝑌that is mediated by 𝑆.
4.4 Estimating Treatment Effect Covariances by
Subtracting Noise
In the previous subsection, we leveraged only the direction of the
known Ωbut not its scale, allowing us to make a connection to
LIMLK. (Note that the above procedure would give the same result
if we used𝜌Ωfor𝜌>0instead of Ω.) Under known Ω, there
is a perhaps more straightforward estimation procedure for Λ𝐾:
subtract(4/𝑛)ΩfrombΣ𝐾. Formally, letting bΛTC
𝐾=bΣ𝐾−(4/𝑛)Ω
(where TC stands for Total Covariance), we have that
𝐸bΛTC
𝐾=Λ𝐾,
and therefore, under the existence of the appropriate probability
limits, the plug-in estimator 𝜃𝑖(bΛTC
𝐾), for either𝑖=1or𝑖=(2,Ψ),
provides a consistent estimator for 𝜃𝑖(Λ𝐾). In particular, when
either𝑆fully mediates the effect of 𝐴on𝑌(no direct effects) or when
direct effects follow the INSIDE assumption, we can consistently
estimate the structural parameter 𝛽with𝜃1(bΛTC
𝐾).
Connection with IV-estimators. Defining the matrix of centered
observations e𝐷0=[e𝑌0,e𝑆0]ase𝐷0=𝐷(𝐼−𝑁−111⊤)e𝐷, and using
the empirical within-experiment covariance for Ω, we can readily
check that
𝜃1(bΛTC
𝐾)=(e𝑆0)⊤(𝐼−(1+4/𝑛)𝑀𝑇)e𝑌0
(e𝑆0)⊤(𝐼−(1+4/𝑛)𝑀𝑇)e𝑆0, (1)
with𝑀𝑇=𝐼−𝑃𝑇,𝑃𝑇=e𝑇(e𝑇⊤e𝑇)−1e𝑇⊤, ande𝑇is the𝑁×𝐾matrix
of one-hot encodings of experiment membership 𝑇(that is e𝑇𝑖,𝑡=
1{𝑇𝑖=𝑡}). One might recognize from (1)that𝜃1(bΛTC
𝐾)is a so-called
𝑘-class IV estimator, with 𝑘=1+4/𝑛.
5 SIMULATION STUDY
To provide insight into our statistical setup and the performance of
our estimators, we conduct a simulation study. The parameters of
 
157KDD ’24, August 25–29, 2024, Barcelona, Spain Aurélien Bibaut, Winston Chou, Simon Ejdemyr, and Nathan Kallus
our simulations are chosen to reflect aspects of real-world data. The
unit-level noise, denoted by Ωin our statistical setup, is typically
large relative to the variance-covariance matrix of treatment effects,
denoted by Λ𝐾, and is also potentially anti-correlated. For example,
clicks may be positively correlated with conversions outside of
any experiment, but treatments that increase “click-baitiness” can
reduce conversions.
Following this example, the top panel of Figure 1 depicts a situa-
tion where treatment effects on a proxy metric 𝑆are negatively cor-
related with treatment effects on a primary objective 𝑌. Throughout
the figure, the white arrow points in the direction of the covariance
in true treatment effects. In the middle panel, we plot the unit-level
noise, which is positively correlated between 𝑆and𝑌, represented
by the black line. Lastly, in the bottom panel, we plot the sampling
distribution of treatment effect estimates with a fixed sample size.
As bottom panel of Figure 1 shows, the unit-level noise can over-
whelm the treatment effect covariance when either the treatment
effect covariance or the sample size is relatively small. As a result,
naively estimating 𝜃1(Λ𝐾)using the covariance matrix of the esti-
mated treatment effects 𝜃1(bΣ𝐾)will be biased in the direction of
𝜃1(Ω). In the absence of unit-level covariance (i.e., Ω=𝜔𝐼), this
bias is “merely” attenuation bias that preserves the direction of the
relationship but biases estimates towards zero. In the presence of
unit-level covariance, the estimated covariance can be arbitrarily
biased, and this bias is worse for small experiments [7].
5.1 LIMLK as Total Least Squares
We now consider the LIMLK estimator as an alternative to the naive
estimator based on the covariance matrix of estimated treatment
effects. As described in Section 4.3, LIMLK is equivalent to perform-
ing Total Least Squares (TLS) after applying the linear transforma-
tionΩ−1/2to the scatterplot of estimated treatment effects. Intu-
itively, this is because applying this transformation on both sides to
bΣ𝐾yields, in expectation, the transformed true covariance matrix
Ω−1/2Λ𝐾Ω−1/2plus isotropic noise — a classic error-in-variables
setup. TLS is an effective method for addressing error-in-variables
as isotropic noise does not change the eigenvectors of bΣ𝐾.
We illustrate the effects of transforming bΣ𝐾byΩ−1/2on least
squares estimators in Figure 2. In both panels, the blue arrow is the
statistical parameter 𝜃1(Ω−1/2Λ𝐾Ω−1/2), which we call the OLS
target. This is the OLS on the transformed scatterplot of true treat-
ment effects. In contrast, the orange line is the statistical parameter
𝜃1(Ω−1/2𝐸bΣ𝐾Ω−1/2), which we call the OLS plim. In words, this is
the OLS on the transformed scatterplot of the estimated treatment
effects as𝐾→∞ . The white arrow and gray line in Figure 2 are
the analogous TLS target, 𝜃2,Ω(Λ𝐾), and TLS plim,𝜃2,Ω(𝐸bΣ𝐾),
respectively. To illustrate the effect of sample size, the upper panel
sets𝑛=100, while the bottom panel sets 𝑛=10000.
Because transforming the scatterplot of estimated treatment
effects isotropizes but does not eliminate the noise, the OLS plim of
the transformed scatterplot will suffer from attenuation bias relative
to the OLS target, with the magnitude of this bias decreasing in
𝑛(evidenced by the convergence of the estimand to the target as
𝑛→∞ ). However, isotropic noise does not change the eigenvectors
of the covariance matrix, so increasing 𝑛does not affect the TLS
plim, which always aligns with the TLS target. This motivates the
Figure 1: How Measurement Error Distorts Treatment Ef-
fect Covariances. This figure shows a hypothetical treatment
effect covariance matrix, a unit-level sampling covariance
matrix (“noise”), and the covariance of matrix of estimated
treatment effects, which is a weighted combination of these.
use of TLS on the transformed scatterplot, which we show in Section
4.3is equivalent to the LIMLK estimator.
5.2 Comparing the Naive, LIMLK, and TC
Estimators
We now present the results of a simulation study of the empirical
properties of our estimators. The estimators evaluated are the naive
OLS performed on the empirical covariance matrix of estimated
effects, LIMLK, and the Total Covariance (TC) estimator, which
 
158Learning the Covariance of Treatment Effects Across Many Weak Experiments KDD ’24, August 25–29, 2024, Barcelona, Spain
Figure 2: Effect of Transforming Estimated Treatment Effects
byΩ−1/2. Transforming the covariance of estimated treat-
ment effects renders the measurement error isotropic, so the
TLS plim on this scatterplot coincides with the TLS target,
whereas the OLS plim suffers from attenuation bias.
performs OLS on the covariance matrix obtained by subtracting
(4/𝑛)ΩfrombΣ𝐾.
To illustrate the effects of unit-level noise on our estimators, we
simulate two surrogates 𝑆1and𝑆2with corresponding structural
parameters 𝛽1and𝛽2.𝑆1is highly correlated with the primary
outcome𝑌in terms of the noise covariance matrix Ω, while𝑆2is
uncorrelated with 𝑌. As a result, we expect the naive estimator to
perform relatively badly for 𝑆1(as it ignores the unit-level covari-
ance) compared to 𝑆2and the LIMLK and TC estimators. To assess
the robustness of our estimators to direct effects, we simulate dataaccording to the linear structural models in Subsections 3.1 (no
direct effects) and 3.2 (direct effects under INSIDE).3
As Figure 3 shows, the naive estimator is heavily biased. LIMLK
and TC are substantially much more accurate than the naive esti-
mator. The relative accuracy of LIMLK and TC is more apparent for
𝛽1, which has the greater distortion from the unit-level covariance.
Without direct effects, LIMLK is more efficient compared to TC,
with a considerably smaller standard error at smaller values of 𝑛.
However, LIMLK is highly sensitive to the assumption of no
direct effects. As Figure 4 shows, when we introduce direct effects,
LIMLK is clearly inconsistent for 𝛽. In contrast, TC is robust and
remains consistent for 𝛽. However, note that, regardless of estimator,
theinterpretation of𝛽is sensitive to the presence of direct effects.
If𝑆fully mediates the effect of 𝐴on𝑌,ℎ(𝑆)=𝛽𝑆is a surrogate
index, and the ATE of a new treatment on 𝑌is equal to the ATE
onℎ(𝑆). If𝑆does not fully mediate the effect of 𝐴on𝑌, and direct
effects follow the INSIDE assumption, then 𝛽can be interpreted as
the portion of the treatment effect of 𝑌that is mediated by 𝑆.
6 LINEAR MODELS OF TREATMENT EFFECT
COVARIANCES AT NETFLIX
This section discusses the real-world application of our methods
to construct linear proxy metric indices for experimentation at
Netflix. Netflix has a sophisticated experimentation platform that
runs thousands of experiments on millions of experimental units
[10]. Still, because the signal-to-noise ratio of each experiment is
small, measurement error poses challenges. This is shown in the
top panel of Figure 5, which plots the correlation between estimated
treatment effects on one Short-term Metric and one Long-term
Metric across 96 arbitrarily-chosen treatment-control comparisons.
The Short- and Long-term Metrics are highly correlated across
experimental units, introducing correlated measurement error that
exaggerates the correlation across treatment effects. To demonstrate
the effect of experiment size on this bias, we show the scatterplot of
estimated treatment effects after downsampling each experiment to
one million units (white circles) and 15 million units (gray circles).
The slope of the OLS in the former scatterplot is about 50% larger
than the equivalent slope in the latter scatterplot. Note that we have
hidden the x- and y-axis tick marks in this figure for confidentiality
reasons.
In the bottom panel of Figure 5, we plot the absolute bias of the
observed covariance between the Short- and Long-term Metrics at
various subsample sizes, using as ground truth the TC-corrected
covariance across non-downsampled experiments. We also plot the
absolute bias of the TC-corrected covariance for comparison. The
median absolute bias reduction from applying our TC estimator is
substantial — approximately 63%.
In addition to these empirical benefits, our method is also well-
suited to the decentralized and rapidly-evolving practice of exper-
imentation at Netflix. Netflix runs thousands of experiments per
year on many diverse parts of the business. Each area of experimen-
tation is staffed by independent data science and engineering teams.
While every team ultimately aims to lift the same north star metrics
3Code to replicate our simulations and all figures except those in Section 6 can be
found at https://github.com/winston-chou/linear-proxy-metrics.
 
159KDD ’24, August 25–29, 2024, Barcelona, Spain Aurélien Bibaut, Winston Chou, Simon Ejdemyr, and Nathan Kallus
Figure 3: Comparison of Naive, LIML, and Total Covariance Estimators Without Direct Effects. When there are no direct effects,
such that the secondary outcomes fully mediate the effect of the intervention on the primary outcome, our LIMLK ( limlk ) and
Total Covariance ( tc) estimators are substantially less biased than the naive regression of the estimated ATEs on the primary
outcome on the estimated ATEs on the secondary outcomes ( naive ). LIMLK has lower variance than TC, which is most apparent
at small sample sizes.
Figure 4: Comparison of Naive, LIML, and Total Covariance Estimators With Direct Effects. When the intervention directly
affects the primary outcome, LIMLK can be extremely biased. In contrast, TC is robust to direct effects, although the causal
interpretation of its estimand changes if there are direct effects. The naive estimator is biased regardless of whether there are
direct effects or not.
 
160Learning the Covariance of Treatment Effects Across Many Weak Experiments KDD ’24, August 25–29, 2024, Barcelona, Spain
Figure 5: How Our Method Improves Treatment Effect Covari-
ance Estimation at Netflix. This figure shows how correlated
measurement error exaggerates the correlation between esti-
mated treatment effects, especially at smaller sample sizes
(top), and how our TC estimator reduces this bias by subtract-
ing a scaled estimate of the measurement error (bottom).
(e.g., long-term revenue), each has also developed secondary met-
rics that are more sensitive and practical to measure in short-term
A/B tests (e.g., user engagement or latency). To complicate matters
further, teams are constantly innovating on these secondary met-
rics to find the right balance of sensitivity and impact on the north
star metrics.
In this decentralized environment, linear models of relationships
between treatment effects are a highly useful tool for coordinating
these efforts and aligning them towards the same proxies for the
north star:
(1)Managing metric tradeoffs. Because experiments in one
area can affect metrics in another area, there is a need to
measure all secondary metrics in all tests, but also to under-
stand the relative impact of these metrics on the north star.This is so we can inform decision-making when one metric
trades off against another metric.
(2)Informing metrics innovation. To minimize wasted effort
on metric development, it is also important to understand
how metrics correlate with the north star “net of” existing
metrics.
(3)Enabling teams to work independently. Lastly, teams
need simple tools in order to iterate on their own metrics.
Teams may come up with dozens of variations of secondary
metrics, and slow, complicated tools for evaluating these
variations are unlikely to be adopted.
Given these needs and the availability of statistics from historical
experiments, it has been common for teams to fit linear models to
estimated treatment effects to identify promising surrogates and
estimate their weights in a linear proxy metric index. While data
scientists are aware that these models can be highly biased, linear
models have a convenience and interpretability that is difficult to
replace. Our TC estimator provides a simple way to consistently
and robustly estimate the true treatment effect covariance matrix,
which supports the construction of these linear proxies, and is
actively used to develop proxy metrics at Netflix.
7 CONCLUSION
In this paper, we discuss the construction of proxy metrics via
meta-analysis of many experiments. A useful parameter in this
setting is the covariance matrix of treatment effects across metrics
in the population of experiments. While estimating this parameter is
computationally convenient, it presents challenges, especially when
treatment effects are small relative to unit-level noise. We present
estimators for overcoming these challenges and show how their
estimands relate to structural parameters under different causal
models.
Throughout, we have assumed that the unit-level covariance
matrix is correctly specified and constant across experiments. This
assumption is often reasonable given that it can be estimated on
vastly more units than are in any individual experiment (e.g., across
the entire user base). In cases where it is not reasonable, users can
also compute Jackknife covariance matrices. That being said, this is
a computationally expensive approach, and future work can explore
more scalable ways of relaxing this assumption.
We show that LIMLK is efficient but inconsistent under direct
effects while TC is consistent under direct and indirect effects. This
suggests that it is possible to construct a statistical test for direct
effects by comparing the LIMLK and TC residuals. We also leave
this as a direction for future research.
Beyond the construction of proxy metrics, there are other op-
portunities to leverage short-term observations for inference on
long-term outcomes. For example, [ 3,6,13] consider how short-
term observations from one randomized experiment can remove
confounding in an observational study with long-term observa-
tions, and [ 14] consider efficiency gains from including units with
no long-term observations. Considering the use of many, albeit
weak, experiments as instruments in these settings may uncover
new opportunities to target long-term outcomes under weaker
assumptions.
 
161KDD ’24, August 25–29, 2024, Barcelona, Spain Aurélien Bibaut, Winston Chou, Simon Ejdemyr, and Nathan Kallus
REFERENCES
[1]Anderson, T., Kunitomo, N., Matsushita, Y., et al. The limited information
maximum likelihood estimator as an angle. CIRJE No. CIRJE-F-619, CIRJE, Faculty
of Economics, University of Tokyo (2009).
[2]Angrist, J. D., Imbens, G. W., and Krueger, A. B. Jackknife instrumental
variables estimation. Journal of Applied Econometrics 14, 1 (1999), 57–67.
[3]Athey, S., Chetty, R., and Imbens, G. Combining experimental and observa-
tional data to estimate treatment effects on long term outcomes. arXiv preprint
arXiv:2006.09676 (2020).
[4]Athey, S., Chetty, R., Imbens, G., and Kang, H. Estimating treatment effects
using multiple surrogates: The role of the surrogate score and the surrogate index.
arXiv preprint arXiv:1603.09326 (2016).
[5]Burgess, S., and Thompson, S. G. Interpreting findings from mendelian random-
ization using the mr-egger method. European journal of epidemiology 32 (2017),
377–389.
[6]Chen, J., and Ritzwoller, D. M. Semiparametric estimation of long-term
treatment effects. Journal of Econometrics 237, 2 (2023), 105545.
[7]Cunningham, T., and Kim, J. Interpreting experiments with multiple outcomes.
[8]Deng, A., Xu, Y., Kohavi, R., and Walker, T. Improving the sensitivity of
online controlled experiments by utilizing pre-experiment data. In Proceedings
of the sixth ACM international conference on Web search and data mining (2013),
pp. 123–132.
[9]Elliott, M. R., Conlon, A. S., Li, Y., Kaciroti, N., and Taylor, J. M. Surrogacy
marker paradox measures in meta-analytic settings. Biostatistics 16, 2 (2015),
400–412.
[10] Forsell, E., Beckley, J., Ejdemyr, S., Hannan, V., Rhines, A., Tingley, M.,
Wardrop, M., and Wong, J. Success stories from a democratized experimentation
platform. arXiv preprint arXiv:2012.10403 (2020).[11] Hahn, J., Hausman, J., and Kuersteiner, G. Estimation with weak instruments:
Accuracy of higher-order bias and mse approximations. The Econometrics Journal
7, 1 (2004), 272–306.
[12] Hohnhold, H., O’Brien, D., and Tang, D. Focusing on the long-term: It’s good
for users and business. In Proceedings of the 21th ACM SIGKDD International
Conference on Knowledge Discovery and Data Mining (2015), pp. 1849–1858.
[13] Imbens, G., Kallus, N., Mao, X., and Wang, Y. Long-term causal inference under
persistent confounding via data combination. arXiv preprint arXiv:2202.07234
(2022).
[14] Kallus, N., and Mao, X. On the role of surrogates in the efficient estimation
of treatment effects with limited outcome data. arXiv preprint arXiv:2003.12408
(2020).
[15] Mikusheva, A., and Sun, L. Inference with many weak instruments. The Review
of Economic Studies 89, 5 (2022), 2663–2686.
[16] Peysakhovich, A., and Eckles, D. Learning causal effects from many random-
ized experiments using regularized instrumental variables. In Proceedings of the
2018 World Wide Web Conference (2018), pp. 699–707.
[17] Prentice, R. L. Surrogate endpoints in clinical trials: definition and operational
criteria. Statistics in medicine 8, 4 (1989), 431–440.
[18] Tripuraneni, N., Richardson, L., D’Amour, A., Soriano, J., and Yadlowsky, S.
Choosing a proxy metric from past experiments. arXiv preprint arXiv:2309.07893
(2023).
[19] Wong, J., Lewis, R., and Wardrop, M. Efficient computation of linear model
treatment effects in an experimentation platform. arXiv preprint arXiv:1910.01305
(2019).
[20] Xie, H., and Aurisset, J. Improving the sensitivity of online controlled ex-
periments: Case studies at netflix. In Proceedings of the 22nd ACM SIGKDD
International Conference on Knowledge Discovery and Data Mining (2016), pp. 645–
654.
 
162